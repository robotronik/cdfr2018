ARM GAS  /tmp/cc2MNkxp.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"vl53l0x_api_calibration.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.VL53L0X_perform_xtalk_calibration,"ax",%progbits
  18              		.align	1
  19              		.global	VL53L0X_perform_xtalk_calibration
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	VL53L0X_perform_xtalk_calibration:
  26              	.LFB126:
  27              		.file 1 "Drivers/VL53L0X/API/vl53l0x_api_calibration.c"
   1:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** /*******************************************************************************
   2:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  Copyright © 2016, STMicroelectronics International N.V.
   3:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  All rights reserved.
   4:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
   5:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  Redistribution and use in source and binary forms, with or without
   6:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  modification, are permitted provided that the following conditions are met:
   7:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  * Redistributions of source code must retain the above copyright
   8:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer.
   9:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  * Redistributions in binary form must reproduce the above copyright
  10:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer in the
  11:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  documentation and/or other materials provided with the distribution.
  12:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  * Neither the name of STMicroelectronics nor the
  13:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  names of its contributors may be used to endorse or promote products
  14:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  derived from this software without specific prior written permission.
  15:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  16:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
  17:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  18:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND
  19:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  NON-INFRINGEMENT OF INTELLECTUAL PROPERTY RIGHTS ARE DISCLAIMED.
  20:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  IN NO EVENT SHALL STMICROELECTRONICS INTERNATIONAL N.V. BE LIABLE FOR ANY
  21:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  22:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  23:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  24:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  25:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  26:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  27:Drivers/VL53L0X/API/vl53l0x_api_calibration.c ****  ******************************************************************************/
  28:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  29:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #include "vl53l0x_api.h"
  30:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #include "vl53l0x_api_core.h"
  31:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #include "vl53l0x_api_calibration.h"
ARM GAS  /tmp/cc2MNkxp.s 			page 2


  32:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  33:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #ifndef __KERNEL__
  34:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #include <stdlib.h>
  35:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #endif
  36:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  37:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_START(fmt, ...) \
  38:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_START(TRACE_MODULE_API, fmt, ##__VA_ARGS__)
  39:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END(status, ...) \
  40:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END(TRACE_MODULE_API, status, ##__VA_ARGS__)
  41:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END_FMT(status, fmt, ...) \
  42:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END_FMT(TRACE_MODULE_API, status, fmt, ##__VA_ARGS__)
  43:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  44:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_0  0
  45:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_5  5
  46:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_10 10
  47:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  48:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** uint32_t refArrayQuadrants[4] = {REF_ARRAY_SPAD_10, REF_ARRAY_SPAD_5,
  49:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		REF_ARRAY_SPAD_0, REF_ARRAY_SPAD_5 };
  50:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  51:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_xtalk_calibration(VL53L0X_DEV Dev,
  52:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			FixPoint1616_t XTalkCalDistance,
  53:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			FixPoint1616_t *pXTalkCompensationRateMegaCps)
  54:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
  28              		.loc 1 54 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 32
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 36
  36              		.cfi_offset 4, -36
  37              		.cfi_offset 5, -32
  38              		.cfi_offset 6, -28
  39              		.cfi_offset 7, -24
  40              		.cfi_offset 8, -20
  41              		.cfi_offset 9, -16
  42              		.cfi_offset 10, -12
  43              		.cfi_offset 11, -8
  44              		.cfi_offset 14, -4
  45 0004 89B0     		sub	sp, sp, #36
  46              	.LCFI1:
  47              		.cfi_def_cfa_offset 72
  48 0006 8146     		mov	r9, r0
  49 0008 9346     		mov	fp, r2
  50              	.LVL1:
  55:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
  56:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
  57:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  58:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  59:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  60:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  61:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
  62:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanSignalRate;
  63:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRange;
  64:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRtnSpads;
  65:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t signalXTalkTotalPerSpad;
ARM GAS  /tmp/cc2MNkxp.s 			page 3


  66:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t xTalkStoredMeanRtnSpadsAsInt;
  67:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t xTalkCalDistanceAsInt;
  68:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t XTalkCompensationRateMegaCps;
  69:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  70:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (XTalkCalDistance <= 0)
  51              		.loc 1 70 0
  52 000a 8A46     		mov	r10, r1
  53 000c 51BB     		cbnz	r1, .L18
  71:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
  54              		.loc 1 71 0
  55 000e 6FF00303 		mvn	r3, #3
  56              	.LVL2:
  57              	.L2:
  72:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  73:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Disable the XTalk compensation */
  74:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
  75:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetXTalkCompensationEnable(Dev, 0);
  76:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  77:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
  78:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  58              		.loc 1 78 0
  59 0012 63B3     		cbz	r3, .L19
  60              	.L3:
  79:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
  80:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
  81:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
  82:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  83:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
  84:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  61              		.loc 1 84 0
  62 0014 002B     		cmp	r3, #0
  63 0016 4DD0     		beq	.L12
  59:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  64              		.loc 1 59 0
  65 0018 0026     		movs	r6, #0
  58:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  66              		.loc 1 58 0
  67 001a 3746     		mov	r7, r6
  57:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  68              		.loc 1 57 0
  69 001c 3546     		mov	r5, r6
  56:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  70              		.loc 1 56 0
  71 001e B046     		mov	r8, r6
  72              	.LVL3:
  73              	.L5:
  85:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
  86:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		sum_spads = 0;
  87:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		sum_signalRate = 0;
  88:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		total_count = 0;
  89:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		for (xtalk_meas = 0; xtalk_meas < 50; xtalk_meas++) {
  90:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
  91:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
  92:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
  93:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
  94:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
  95:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/cc2MNkxp.s 			page 4


  96:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
  97:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
  98:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
  99:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 100:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 101:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 102:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 103:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 104:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					/ 256;
 105:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 106:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 107:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 108:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 109:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* no valid values found */
 110:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 111:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 112:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 113:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 114:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 115:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 116:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  74              		.loc 1 116 0
  75 0020 002B     		cmp	r3, #0
  76 0022 5BD1     		bne	.L9
 117:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 118:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		xTalkStoredMeanSignalRate = sum_signalRate / total_count;
  77              		.loc 1 118 0
  78 0024 B7FBF6F7 		udiv	r7, r7, r6
  79              	.LVL4:
 119:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 120:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			sum_ranging << 16) / total_count);
  80              		.loc 1 120 0
  81 0028 4FEA0848 		lsl	r8, r8, #16
  82              	.LVL5:
 119:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
  83              		.loc 1 119 0
  84 002c B8FBF6F8 		udiv	r8, r8, r6
  85              	.LVL6:
 121:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 122:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			sum_spads << 16) / total_count);
  86              		.loc 1 122 0
  87 0030 2D04     		lsls	r5, r5, #16
  88              	.LVL7:
 121:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
  89              		.loc 1 121 0
  90 0032 B5FBF6F6 		udiv	r6, r5, r6
  91              	.LVL8:
 123:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 124:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Round Mean Spads to Whole Number.
 125:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * Typically the calculated mean SPAD count is a whole number
 126:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * or very close to a whole
 127:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * number, therefore any truncation will not result in a
 128:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * significant loss in accuracy.
 129:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * Also, for a grey target at a typical distance of around
 130:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * 400mm, around 220 SPADs will
 131:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * be enabled, therefore, any truncation will result in a loss
 132:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * of accuracy of less than
ARM GAS  /tmp/cc2MNkxp.s 			page 5


 133:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * 0.5%.
 134:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 */
 135:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpadsAsInt = (xTalkStoredMeanRtnSpads +
  92              		.loc 1 135 0
  93 0036 06F50046 		add	r6, r6, #32768
  94              	.LVL9:
 136:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			0x8000) >> 16;
 137:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 138:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 139:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 140:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * is lost.*/
 141:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 xTalkCalDistanceAsInt = (XTalkCalDistance + 0x8000) >> 16;
  95              		.loc 1 141 0
  96 003a 0AF50043 		add	r3, r10, #32768
  97              	.LVL10:
  98 003e 1B0C     		lsrs	r3, r3, #16
  99              	.LVL11:
 142:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 143:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (xTalkStoredMeanRtnSpadsAsInt == 0 ||
 100              		.loc 1 143 0
 101 0040 360C     		lsrs	r6, r6, #16
 102              	.LVL12:
 103 0042 42D0     		beq	.L14
 104              		.loc 1 143 0 is_stmt 0 discriminator 1
 105 0044 002B     		cmp	r3, #0
 106 0046 4DD0     		beq	.L15
 144:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		   xTalkCalDistanceAsInt == 0 ||
 107              		.loc 1 144 0 is_stmt 1
 108 0048 C245     		cmp	r10, r8
 109 004a 4DD9     		bls	.L16
 145:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		   xTalkStoredMeanRange >= XTalkCalDistance) {
 146:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = 0;
 147:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		} else {
 148:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Round Cal Distance to Whole Number.
 149:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			   Note that the cal distance is in mm, therefore no
 150:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			   resolution is lost.*/
 151:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			xTalkCalDistanceAsInt = (XTalkCalDistance +
 152:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				0x8000) >> 16;
 153:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 154:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Apply division by mean spad count early in the
 155:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * calculation to keep the numbers small.
 156:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * This ensures we can maintain a 32bit calculation.
 157:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * Fixed1616 / int := Fixed1616 */
 158:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad = (xTalkStoredMeanSignalRate) /
 110              		.loc 1 158 0
 111 004c B7FBF6F4 		udiv	r4, r7, r6
 112              	.LVL13:
 159:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				xTalkStoredMeanRtnSpadsAsInt;
 160:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 161:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Complete the calculation for total Signal XTalk per
 162:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * SPAD
 163:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * Fixed1616 * (Fixed1616 - Fixed1616/int) :=
 164:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * (2^16 * Fixed1616)
 165:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 */
 166:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad *= ((1 << 16) -
 167:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 113              		.loc 1 167 0
ARM GAS  /tmp/cc2MNkxp.s 			page 6


 114 0050 B8FBF3F8 		udiv	r8, r8, r3
 115              	.LVL14:
 166:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 116              		.loc 1 166 0
 117 0054 C8F58033 		rsb	r3, r8, #65536
 118              	.LVL15:
 119 0058 04FB03F4 		mul	r4, r4, r3
 120              	.LVL16:
 168:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 169:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Round from 2^16 * Fixed1616, to Fixed1616. */
 170:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = (signalXTalkTotalPerSpad
 171:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 121              		.loc 1 171 0
 122 005c 04F50044 		add	r4, r4, #32768
 123              	.LVL17:
 170:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 124              		.loc 1 170 0
 125 0060 240C     		lsrs	r4, r4, #16
 126              	.LVL18:
 127 0062 33E0     		b	.L10
 128              	.LVL19:
 129              	.L18:
  75:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 130              		.loc 1 75 0
 131 0064 0021     		movs	r1, #0
 132              	.LVL20:
 133 0066 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
 134              	.LVL21:
 135 006a 0346     		mov	r3, r0
 136              	.LVL22:
 137 006c D1E7     		b	.L2
 138              	.L19:
  79:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 139              		.loc 1 79 0
 140 006e 0022     		movs	r2, #0
 141 0070 0321     		movs	r1, #3
 142 0072 4846     		mov	r0, r9
 143 0074 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 144              	.LVL23:
 145 0078 0346     		mov	r3, r0
 146              	.LVL24:
 147 007a CBE7     		b	.L3
 148              	.LVL25:
 149              	.L7:
  89:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 150              		.loc 1 89 0 discriminator 2
 151 007c 0134     		adds	r4, r4, #1
 152              	.LVL26:
 153 007e E4B2     		uxtb	r4, r4
 154              	.LVL27:
 155              	.L4:
  89:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 156              		.loc 1 89 0 is_stmt 0 discriminator 1
 157 0080 312C     		cmp	r4, #49
 158 0082 1DD8     		bhi	.L6
  90:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
 159              		.loc 1 90 0 is_stmt 1
ARM GAS  /tmp/cc2MNkxp.s 			page 7


 160 0084 01A9     		add	r1, sp, #4
 161 0086 4846     		mov	r0, r9
 162 0088 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 163              	.LVL28:
  93:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 164              		.loc 1 93 0
 165 008c 0346     		mov	r3, r0
 166 008e B8B9     		cbnz	r0, .L6
  97:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 167              		.loc 1 97 0
 168 0090 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 169 0094 002A     		cmp	r2, #0
 170 0096 F1D1     		bne	.L7
  99:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 171              		.loc 1 99 0
 172 0098 BDF80C20 		ldrh	r2, [sp, #12]
  98:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 173              		.loc 1 98 0
 174 009c 9044     		add	r8, r8, r2
 175              	.LVL29:
 176 009e 1FFA88F8 		uxth	r8, r8
 177              	.LVL30:
 101:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 178              		.loc 1 101 0
 179 00a2 049A     		ldr	r2, [sp, #16]
 100:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 180              		.loc 1 100 0
 181 00a4 1744     		add	r7, r7, r2
 182              	.LVL31:
 103:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					/ 256;
 183              		.loc 1 103 0
 184 00a6 BDF81820 		ldrh	r2, [sp, #24]
 102:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 185              		.loc 1 102 0
 186 00aa 05EB1225 		add	r5, r5, r2, lsr #8
 187              	.LVL32:
 188 00ae ADB2     		uxth	r5, r5
 189              	.LVL33:
 105:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 190              		.loc 1 105 0
 191 00b0 0136     		adds	r6, r6, #1
 192              	.LVL34:
 193 00b2 E3E7     		b	.L7
 194              	.LVL35:
 195              	.L12:
  89:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 196              		.loc 1 89 0
 197 00b4 0024     		movs	r4, #0
  88:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		for (xtalk_meas = 0; xtalk_meas < 50; xtalk_meas++) {
 198              		.loc 1 88 0
 199 00b6 2646     		mov	r6, r4
  87:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		total_count = 0;
 200              		.loc 1 87 0
 201 00b8 2746     		mov	r7, r4
  86:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		sum_signalRate = 0;
 202              		.loc 1 86 0
 203 00ba 2546     		mov	r5, r4
ARM GAS  /tmp/cc2MNkxp.s 			page 8


  85:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		sum_spads = 0;
 204              		.loc 1 85 0
 205 00bc A046     		mov	r8, r4
 206 00be DFE7     		b	.L4
 207              	.LVL36:
 208              	.L6:
 110:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 209              		.loc 1 110 0
 210 00c0 002E     		cmp	r6, #0
 211 00c2 ADD1     		bne	.L5
 111:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 212              		.loc 1 111 0
 213 00c4 6FF00503 		mvn	r3, #5
 214              	.LVL37:
 215 00c8 AAE7     		b	.L5
 216              	.LVL38:
 217              	.L14:
 146:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		} else {
 218              		.loc 1 146 0
 219 00ca 0024     		movs	r4, #0
 220              	.LVL39:
 221              	.L10:
 172:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 173:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 174:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*pXTalkCompensationRateMegaCps = XTalkCompensationRateMegaCps;
 222              		.loc 1 174 0
 223 00cc CBF80040 		str	r4, [fp]
 175:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 176:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 177:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 178:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationEnable(Dev, 1);
 224              		.loc 1 178 0
 225 00d0 0121     		movs	r1, #1
 226 00d2 4846     		mov	r0, r9
 227 00d4 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
 228              	.LVL40:
 179:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 180:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 181:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 229              		.loc 1 181 0
 230 00d8 0346     		mov	r3, r0
 231 00da 38B1     		cbz	r0, .L20
 232              	.LVL41:
 233              	.L9:
 182:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 183:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					XTalkCompensationRateMegaCps);
 184:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 185:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 186:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 187:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
 188:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 234              		.loc 1 188 0
 235 00dc 1846     		mov	r0, r3
 236 00de 09B0     		add	sp, sp, #36
 237              	.LCFI2:
 238              		.cfi_remember_state
 239              		.cfi_def_cfa_offset 36
ARM GAS  /tmp/cc2MNkxp.s 			page 9


 240              		@ sp needed
 241 00e0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 242              	.LVL42:
 243              	.L15:
 244              	.LCFI3:
 245              		.cfi_restore_state
 146:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		} else {
 246              		.loc 1 146 0
 247 00e4 0024     		movs	r4, #0
 248 00e6 F1E7     		b	.L10
 249              	.L16:
 250 00e8 0024     		movs	r4, #0
 251 00ea EFE7     		b	.L10
 252              	.LVL43:
 253              	.L20:
 182:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 254              		.loc 1 182 0
 255 00ec 2146     		mov	r1, r4
 256 00ee 4846     		mov	r0, r9
 257              	.LVL44:
 258 00f0 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationRateMegaCps
 259              	.LVL45:
 260 00f4 0346     		mov	r3, r0
 261              	.LVL46:
 262 00f6 F1E7     		b	.L9
 263              		.cfi_endproc
 264              	.LFE126:
 266              		.section	.text.VL53L0X_perform_offset_calibration,"ax",%progbits
 267              		.align	1
 268              		.global	VL53L0X_perform_offset_calibration
 269              		.syntax unified
 270              		.thumb
 271              		.thumb_func
 272              		.fpu fpv4-sp-d16
 274              	VL53L0X_perform_offset_calibration:
 275              	.LFB127:
 189:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 190:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_offset_calibration(VL53L0X_DEV Dev,
 191:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			FixPoint1616_t CalDistanceMilliMeter,
 192:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			int32_t *pOffsetMicroMeter)
 193:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 276              		.loc 1 193 0
 277              		.cfi_startproc
 278              		@ args = 0, pretend = 0, frame = 32
 279              		@ frame_needed = 0, uses_anonymous_args = 0
 280              	.LVL47:
 281 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 282              	.LCFI4:
 283              		.cfi_def_cfa_offset 28
 284              		.cfi_offset 4, -28
 285              		.cfi_offset 5, -24
 286              		.cfi_offset 6, -20
 287              		.cfi_offset 7, -16
 288              		.cfi_offset 8, -12
 289              		.cfi_offset 9, -8
 290              		.cfi_offset 14, -4
 291 0004 89B0     		sub	sp, sp, #36
ARM GAS  /tmp/cc2MNkxp.s 			page 10


 292              	.LCFI5:
 293              		.cfi_def_cfa_offset 64
 294 0006 0546     		mov	r5, r0
 295 0008 9046     		mov	r8, r2
 296              	.LVL48:
 194:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 195:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
 196:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 197:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 198:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t StoredMeanRange;
 199:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t StoredMeanRangeAsInt;
 200:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t CalDistanceAsInt_mm;
 201:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t SequenceStepEnabled;
 202:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int meas = 0;
 203:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 204:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (CalDistanceMilliMeter <= 0)
 297              		.loc 1 204 0
 298 000a 0F46     		mov	r7, r1
 299 000c 99B9     		cbnz	r1, .L37
 205:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
 300              		.loc 1 205 0
 301 000e 6FF00303 		mvn	r3, #3
 302              	.LVL49:
 303              	.L22:
 206:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 207:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 208:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev, 0);
 209:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 210:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 211:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Get the value of the TCC */
 212:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 304              		.loc 1 212 0
 305 0012 ABB1     		cbz	r3, .L38
 306              	.L23:
 213:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetSequenceStepEnable(Dev,
 214:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 215:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 216:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 217:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Disable the TCC */
 218:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 307              		.loc 1 218 0
 308 0014 E3B1     		cbz	r3, .L39
 309              	.L24:
 219:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetSequenceStepEnable(Dev,
 220:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 221:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 222:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 223:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
 224:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 310              		.loc 1 224 0
 311 0016 13B3     		cbz	r3, .L40
 312              	.L25:
 225:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
 226:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 227:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 228:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
 229:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
ARM GAS  /tmp/cc2MNkxp.s 			page 11


 313              		.loc 1 229 0
 314 0018 002B     		cmp	r3, #0
 315 001a 3BD0     		beq	.L34
 196:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 316              		.loc 1 196 0
 317 001c 0026     		movs	r6, #0
 195:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 318              		.loc 1 195 0
 319 001e B146     		mov	r9, r6
 320              	.LVL50:
 321              	.L27:
 230:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
 231:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		total_count = 0;
 232:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		for (meas = 0; meas < 50; meas++) {
 233:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 234:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
 235:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 236:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 237:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 238:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 239:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
 240:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 241:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 242:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 243:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 244:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 245:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 246:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 247:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* no valid values found */
 248:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 249:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 250:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 251:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 252:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 253:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 322              		.loc 1 253 0
 323 0020 002B     		cmp	r3, #0
 324 0022 40D0     		beq	.L41
 325              	.LVL51:
 326              	.L31:
 254:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 255:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		StoredMeanRange = (FixPoint1616_t)((uint32_t)(sum_ranging << 16)
 256:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/ total_count);
 257:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 258:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		StoredMeanRangeAsInt = (StoredMeanRange + 0x8000) >> 16;
 259:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 260:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 261:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 262:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * is lost.*/
 263:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 CalDistanceAsInt_mm = (CalDistanceMilliMeter + 0x8000) >> 16;
 264:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 265:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 *pOffsetMicroMeter = (CalDistanceAsInt_mm -
 266:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 267:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 268:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Apply the calculated offset */
 269:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 270:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
ARM GAS  /tmp/cc2MNkxp.s 			page 12


 271:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 272:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 273:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 274:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 275:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 276:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 277:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 278:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Restore the TCC */
 279:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 327              		.loc 1 279 0
 328 0024 1BB9     		cbnz	r3, .L32
 280:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (SequenceStepEnabled != 0)
 329              		.loc 1 280 0
 330 0026 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 331 002a 002A     		cmp	r2, #0
 332 002c 54D1     		bne	.L42
 333              	.L32:
 281:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetSequenceStepEnable(Dev,
 282:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 283:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 284:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 285:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
 286:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 334              		.loc 1 286 0
 335 002e 1846     		mov	r0, r3
 336 0030 09B0     		add	sp, sp, #36
 337              	.LCFI6:
 338              		.cfi_remember_state
 339              		.cfi_def_cfa_offset 28
 340              		@ sp needed
 341 0032 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 342              	.LVL52:
 343              	.L37:
 344              	.LCFI7:
 345              		.cfi_restore_state
 208:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 346              		.loc 1 208 0
 347 0036 0021     		movs	r1, #0
 348              	.LVL53:
 349 0038 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 350              	.LVL54:
 351 003c 0346     		mov	r3, r0
 352              	.LVL55:
 353 003e E8E7     		b	.L22
 354              	.L38:
 213:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 355              		.loc 1 213 0
 356 0040 0DF10302 		add	r2, sp, #3
 357 0044 0021     		movs	r1, #0
 358 0046 2846     		mov	r0, r5
 359 0048 FFF7FEFF 		bl	VL53L0X_GetSequenceStepEnable
 360              	.LVL56:
 361 004c 0346     		mov	r3, r0
 362              	.LVL57:
 363 004e E1E7     		b	.L23
 364              	.L39:
 219:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
ARM GAS  /tmp/cc2MNkxp.s 			page 13


 365              		.loc 1 219 0
 366 0050 0022     		movs	r2, #0
 367 0052 1146     		mov	r1, r2
 368 0054 2846     		mov	r0, r5
 369 0056 FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 370              	.LVL58:
 371 005a 0346     		mov	r3, r0
 372              	.LVL59:
 373 005c DBE7     		b	.L24
 374              	.L40:
 225:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 375              		.loc 1 225 0
 376 005e 0022     		movs	r2, #0
 377 0060 0321     		movs	r1, #3
 378 0062 2846     		mov	r0, r5
 379 0064 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 380              	.LVL60:
 381 0068 0346     		mov	r3, r0
 382              	.LVL61:
 383 006a D5E7     		b	.L25
 384              	.LVL62:
 385              	.L29:
 232:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 386              		.loc 1 232 0 discriminator 2
 387 006c 0134     		adds	r4, r4, #1
 388              	.LVL63:
 389              	.L26:
 232:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 390              		.loc 1 232 0 is_stmt 0 discriminator 1
 391 006e 312C     		cmp	r4, #49
 392 0070 14DC     		bgt	.L28
 233:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
 393              		.loc 1 233 0 is_stmt 1
 394 0072 01A9     		add	r1, sp, #4
 395 0074 2846     		mov	r0, r5
 396 0076 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 397              	.LVL64:
 236:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 398              		.loc 1 236 0
 399 007a 0346     		mov	r3, r0
 400 007c 70B9     		cbnz	r0, .L28
 240:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 401              		.loc 1 240 0
 402 007e 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 403 0082 002A     		cmp	r2, #0
 404 0084 F2D1     		bne	.L29
 242:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 405              		.loc 1 242 0
 406 0086 BDF80C20 		ldrh	r2, [sp, #12]
 241:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 407              		.loc 1 241 0
 408 008a 4A44     		add	r2, r2, r9
 409 008c 1FFA82F9 		uxth	r9, r2
 410              	.LVL65:
 243:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 411              		.loc 1 243 0
 412 0090 0136     		adds	r6, r6, #1
ARM GAS  /tmp/cc2MNkxp.s 			page 14


 413              	.LVL66:
 414 0092 EBE7     		b	.L29
 415              	.LVL67:
 416              	.L34:
 232:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 417              		.loc 1 232 0
 418 0094 0024     		movs	r4, #0
 231:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		for (meas = 0; meas < 50; meas++) {
 419              		.loc 1 231 0
 420 0096 2646     		mov	r6, r4
 230:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		total_count = 0;
 421              		.loc 1 230 0
 422 0098 A146     		mov	r9, r4
 423 009a E8E7     		b	.L26
 424              	.LVL68:
 425              	.L28:
 248:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 426              		.loc 1 248 0
 427 009c 002E     		cmp	r6, #0
 428 009e BFD1     		bne	.L27
 249:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 429              		.loc 1 249 0
 430 00a0 6FF00503 		mvn	r3, #5
 431              	.LVL69:
 432 00a4 BCE7     		b	.L27
 433              	.LVL70:
 434              	.L41:
 255:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/ total_count);
 435              		.loc 1 255 0
 436 00a6 4FEA0942 		lsl	r2, r9, #16
 437 00aa B2FBF6F6 		udiv	r6, r2, r6
 438              	.LVL71:
 258:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 439              		.loc 1 258 0
 440 00ae 06F50046 		add	r6, r6, #32768
 441              	.LVL72:
 263:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 442              		.loc 1 263 0
 443 00b2 07F50047 		add	r7, r7, #32768
 444              	.LVL73:
 445 00b6 3F0C     		lsrs	r7, r7, #16
 446              	.LVL74:
 265:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 447              		.loc 1 265 0
 448 00b8 A7EB1646 		sub	r6, r7, r6, lsr #16
 449              	.LVL75:
 266:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 450              		.loc 1 266 0
 451 00bc 4FF47A73 		mov	r3, #1000
 452              	.LVL76:
 453 00c0 03FB06F6 		mul	r6, r3, r6
 265:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 454              		.loc 1 265 0
 455 00c4 C8F80060 		str	r6, [r8]
 270:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 456              		.loc 1 270 0
 457 00c8 6E62     		str	r6, [r5, #36]
ARM GAS  /tmp/cc2MNkxp.s 			page 15


 272:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 458              		.loc 1 272 0
 459 00ca D8F80010 		ldr	r1, [r8]
 460 00ce 2846     		mov	r0, r5
 461 00d0 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 462              	.LVL77:
 463 00d4 0346     		mov	r3, r0
 464              	.LVL78:
 465 00d6 A5E7     		b	.L31
 466              	.LVL79:
 467              	.L42:
 281:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 468              		.loc 1 281 0
 469 00d8 0122     		movs	r2, #1
 470 00da 0021     		movs	r1, #0
 471 00dc 2846     		mov	r0, r5
 472 00de FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 473              	.LVL80:
 474 00e2 0346     		mov	r3, r0
 475              	.LVL81:
 476 00e4 A3E7     		b	.L32
 477              		.cfi_endproc
 478              	.LFE127:
 480              		.section	.text.VL53L0X_set_offset_calibration_data_micro_meter,"ax",%progbits
 481              		.align	1
 482              		.global	VL53L0X_set_offset_calibration_data_micro_meter
 483              		.syntax unified
 484              		.thumb
 485              		.thumb_func
 486              		.fpu fpv4-sp-d16
 488              	VL53L0X_set_offset_calibration_data_micro_meter:
 489              	.LFB128:
 287:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 288:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 289:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 290:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		int32_t OffsetCalibrationDataMicroMeter)
 291:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 490              		.loc 1 291 0
 491              		.cfi_startproc
 492              		@ args = 0, pretend = 0, frame = 0
 493              		@ frame_needed = 0, uses_anonymous_args = 0
 494              	.LVL82:
 495 0000 08B5     		push	{r3, lr}
 496              	.LCFI8:
 497              		.cfi_def_cfa_offset 8
 498              		.cfi_offset 3, -8
 499              		.cfi_offset 14, -4
 500              	.LVL83:
 292:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 293:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int32_t cMaxOffsetMicroMeter = 511000;
 294:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int32_t cMinOffsetMicroMeter = -512000;
 295:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 296:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t encodedOffsetVal;
 297:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 298:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_START("");
 299:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 300:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter > cMaxOffsetMicroMeter)
ARM GAS  /tmp/cc2MNkxp.s 			page 16


 501              		.loc 1 300 0
 502 0002 0F4B     		ldr	r3, .L50
 503 0004 9942     		cmp	r1, r3
 504 0006 05DC     		bgt	.L47
 301:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 302:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	else if (OffsetCalibrationDataMicroMeter < cMinOffsetMicroMeter)
 505              		.loc 1 302 0
 506 0008 11F5FA2F 		cmn	r1, #512000
 507 000c 0EDB     		blt	.L48
 303:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMinOffsetMicroMeter;
 304:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 305:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* The offset register is 10.2 format and units are mm
 306:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * therefore conversion is applied by a division of
 307:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * 250.
 308:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 309:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter >= 0) {
 508              		.loc 1 309 0
 509 000e 0029     		cmp	r1, #0
 510 0010 01DA     		bge	.L44
 511 0012 0CE0     		b	.L45
 512              	.L47:
 301:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 513              		.loc 1 301 0
 514 0014 0A49     		ldr	r1, .L50
 515              	.LVL84:
 516              	.L44:
 310:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 311:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 517              		.loc 1 311 0
 518 0016 0B4A     		ldr	r2, .L50+4
 519 0018 82FB0132 		smull	r3, r2, r2, r1
 520 001c C917     		asrs	r1, r1, #31
 521 001e C1EB2212 		rsb	r2, r1, r2, asr #4
 522              	.LVL85:
 523              	.L46:
 312:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	} else {
 313:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 314:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			cOffsetRange +
 315:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 316:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 317:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 318:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrWord(Dev,
 524              		.loc 1 318 0
 525 0022 92B2     		uxth	r2, r2
 526              	.LVL86:
 527 0024 2821     		movs	r1, #40
 528 0026 FFF7FEFF 		bl	VL53L0X_WrWord
 529              	.LVL87:
 319:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 320:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		encodedOffsetVal);
 321:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 322:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_END(Status);
 323:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
 324:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 530              		.loc 1 324 0
 531 002a 08BD     		pop	{r3, pc}
 532              	.LVL88:
ARM GAS  /tmp/cc2MNkxp.s 			page 17


 533              	.L48:
 303:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 534              		.loc 1 303 0
 535 002c 0649     		ldr	r1, .L50+8
 536              	.LVL89:
 537              	.L45:
 315:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 538              		.loc 1 315 0
 539 002e 054B     		ldr	r3, .L50+4
 540 0030 83FB0123 		smull	r2, r3, r3, r1
 541 0034 CA17     		asrs	r2, r1, #31
 542 0036 C2EB2312 		rsb	r2, r2, r3, asr #4
 314:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 543              		.loc 1 314 0
 544 003a 02F58052 		add	r2, r2, #4096
 545              	.LVL90:
 546 003e F0E7     		b	.L46
 547              	.L51:
 548              		.align	2
 549              	.L50:
 550 0040 18CC0700 		.word	511000
 551 0044 D34D6210 		.word	274877907
 552 0048 0030F8FF 		.word	-512000
 553              		.cfi_endproc
 554              	.LFE128:
 556              		.section	.text.VL53L0X_get_offset_calibration_data_micro_meter,"ax",%progbits
 557              		.align	1
 558              		.global	VL53L0X_get_offset_calibration_data_micro_meter
 559              		.syntax unified
 560              		.thumb
 561              		.thumb_func
 562              		.fpu fpv4-sp-d16
 564              	VL53L0X_get_offset_calibration_data_micro_meter:
 565              	.LFB129:
 325:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 326:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 327:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		int32_t *pOffsetCalibrationDataMicroMeter)
 328:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 566              		.loc 1 328 0
 567              		.cfi_startproc
 568              		@ args = 0, pretend = 0, frame = 8
 569              		@ frame_needed = 0, uses_anonymous_args = 0
 570              	.LVL91:
 571 0000 10B5     		push	{r4, lr}
 572              	.LCFI9:
 573              		.cfi_def_cfa_offset 8
 574              		.cfi_offset 4, -8
 575              		.cfi_offset 14, -4
 576 0002 82B0     		sub	sp, sp, #8
 577              	.LCFI10:
 578              		.cfi_def_cfa_offset 16
 579 0004 0C46     		mov	r4, r1
 580              	.LVL92:
 329:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 330:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t RangeOffsetRegister;
 331:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int16_t cMaxOffset = 2047;
 332:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
ARM GAS  /tmp/cc2MNkxp.s 			page 18


 333:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 334:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Note that offset has 10.2 format */
 335:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 336:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_RdWord(Dev,
 581              		.loc 1 336 0
 582 0006 0DF10602 		add	r2, sp, #6
 583 000a 2821     		movs	r1, #40
 584              	.LVL93:
 585 000c FFF7FEFF 		bl	VL53L0X_RdWord
 586              	.LVL94:
 337:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 338:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				&RangeOffsetRegister);
 339:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 340:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 587              		.loc 1 340 0
 588 0010 0246     		mov	r2, r0
 589 0012 50B9     		cbnz	r0, .L53
 341:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		RangeOffsetRegister = (RangeOffsetRegister & 0x0fff);
 590              		.loc 1 341 0
 591 0014 BDF80630 		ldrh	r3, [sp, #6]
 592 0018 C3F30B03 		ubfx	r3, r3, #0, #12
 593              	.LVL95:
 342:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 343:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Apply 12 bit 2's compliment conversion */
 344:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (RangeOffsetRegister > cMaxOffset)
 594              		.loc 1 344 0
 595 001c B3F5006F 		cmp	r3, #2048
 596 0020 06D2     		bcs	.L56
 345:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 346:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(int16_t)(RangeOffsetRegister - cOffsetRange)
 347:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					* 250;
 348:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		else
 349:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 350:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 597              		.loc 1 350 0
 598 0022 FA21     		movs	r1, #250
 599 0024 03FB01F3 		mul	r3, r3, r1
 600              	.LVL96:
 349:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 601              		.loc 1 349 0
 602 0028 2360     		str	r3, [r4]
 603              	.LVL97:
 604              	.L53:
 351:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 352:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 353:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 354:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
 355:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 605              		.loc 1 355 0
 606 002a 1046     		mov	r0, r2
 607              	.LVL98:
 608 002c 02B0     		add	sp, sp, #8
 609              	.LCFI11:
 610              		.cfi_remember_state
 611              		.cfi_def_cfa_offset 8
 612              		@ sp needed
 613 002e 10BD     		pop	{r4, pc}
ARM GAS  /tmp/cc2MNkxp.s 			page 19


 614              	.LVL99:
 615              	.L56:
 616              	.LCFI12:
 617              		.cfi_restore_state
 346:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					* 250;
 618              		.loc 1 346 0
 619 0030 A3F58053 		sub	r3, r3, #4096
 620              	.LVL100:
 347:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		else
 621              		.loc 1 347 0
 622 0034 FA21     		movs	r1, #250
 623 0036 01FB03F3 		mul	r3, r1, r3
 624              	.LVL101:
 345:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(int16_t)(RangeOffsetRegister - cOffsetRange)
 625              		.loc 1 345 0
 626 003a 2360     		str	r3, [r4]
 627              	.LVL102:
 628 003c F5E7     		b	.L53
 629              		.cfi_endproc
 630              	.LFE129:
 632              		.section	.text.VL53L0X_apply_offset_adjustment,"ax",%progbits
 633              		.align	1
 634              		.global	VL53L0X_apply_offset_adjustment
 635              		.syntax unified
 636              		.thumb
 637              		.thumb_func
 638              		.fpu fpv4-sp-d16
 640              	VL53L0X_apply_offset_adjustment:
 641              	.LFB130:
 356:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 357:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 358:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_apply_offset_adjustment(VL53L0X_DEV Dev)
 359:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 642              		.loc 1 359 0
 643              		.cfi_startproc
 644              		@ args = 0, pretend = 0, frame = 8
 645              		@ frame_needed = 0, uses_anonymous_args = 0
 646              	.LVL103:
 647 0000 30B5     		push	{r4, r5, lr}
 648              	.LCFI13:
 649              		.cfi_def_cfa_offset 12
 650              		.cfi_offset 4, -12
 651              		.cfi_offset 5, -8
 652              		.cfi_offset 14, -4
 653 0002 83B0     		sub	sp, sp, #12
 654              	.LCFI14:
 655              		.cfi_def_cfa_offset 24
 656 0004 0446     		mov	r4, r0
 657              	.LVL104:
 360:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 361:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int32_t CorrectedOffsetMicroMeters;
 362:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int32_t CurrentOffsetMicroMeters;
 363:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 364:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* if we run on this function we can read all the NVM info
 365:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * used by the API */
 366:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_get_info_from_device(Dev, 7);
 658              		.loc 1 366 0
ARM GAS  /tmp/cc2MNkxp.s 			page 20


 659 0006 0721     		movs	r1, #7
 660 0008 FFF7FEFF 		bl	VL53L0X_get_info_from_device
 661              	.LVL105:
 367:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 368:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Read back current device offset */
 369:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 662              		.loc 1 369 0
 663 000c 0346     		mov	r3, r0
 664 000e 18B1     		cbz	r0, .L61
 665              	.LVL106:
 666              	.L58:
 370:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 371:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					&CurrentOffsetMicroMeters);
 372:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 373:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 374:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Apply Offset Adjustment derived from 400mm measurements */
 375:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 667              		.loc 1 375 0
 668 0010 43B1     		cbz	r3, .L62
 669              	.LVL107:
 670              	.L59:
 376:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 377:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Store initial device offset */
 378:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		PALDevDataSet(Dev, Part2PartOffsetNVMMicroMeter,
 379:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 380:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 381:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		CorrectedOffsetMicroMeters = CurrentOffsetMicroMeters +
 382:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 383:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Part2PartOffsetAdjustmentNVMMicroMeter);
 384:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 385:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 386:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 387:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 388:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* store current, adjusted offset */
 389:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 390:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 391:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 392:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 393:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 394:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 395:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
 396:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 671              		.loc 1 396 0
 672 0012 1846     		mov	r0, r3
 673 0014 03B0     		add	sp, sp, #12
 674              	.LCFI15:
 675              		.cfi_remember_state
 676              		.cfi_def_cfa_offset 12
 677              		@ sp needed
 678 0016 30BD     		pop	{r4, r5, pc}
 679              	.LVL108:
 680              	.L61:
 681              	.LCFI16:
 682              		.cfi_restore_state
 370:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 683              		.loc 1 370 0
 684 0018 01A9     		add	r1, sp, #4
ARM GAS  /tmp/cc2MNkxp.s 			page 21


 685 001a 2046     		mov	r0, r4
 686              	.LVL109:
 687 001c FFF7FEFF 		bl	VL53L0X_GetOffsetCalibrationDataMicroMeter
 688              	.LVL110:
 689 0020 0346     		mov	r3, r0
 690              	.LVL111:
 691 0022 F5E7     		b	.L58
 692              	.L62:
 378:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 693              		.loc 1 378 0
 694 0024 019B     		ldr	r3, [sp, #4]
 695              	.LVL112:
 696 0026 A360     		str	r3, [r4, #8]
 382:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Part2PartOffsetAdjustmentNVMMicroMeter);
 697              		.loc 1 382 0
 698 0028 E568     		ldr	r5, [r4, #12]
 381:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 699              		.loc 1 381 0
 700 002a 1D44     		add	r5, r5, r3
 701              	.LVL113:
 385:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 702              		.loc 1 385 0
 703 002c 2946     		mov	r1, r5
 704 002e 2046     		mov	r0, r4
 705 0030 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 706              	.LVL114:
 389:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 707              		.loc 1 389 0
 708 0034 0346     		mov	r3, r0
 709 0036 0028     		cmp	r0, #0
 710 0038 EBD1     		bne	.L59
 390:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 711              		.loc 1 390 0
 712 003a 6562     		str	r5, [r4, #36]
 713 003c E9E7     		b	.L59
 714              		.cfi_endproc
 715              	.LFE130:
 717              		.section	.text.get_next_good_spad,"ax",%progbits
 718              		.align	1
 719              		.global	get_next_good_spad
 720              		.syntax unified
 721              		.thumb
 722              		.thumb_func
 723              		.fpu fpv4-sp-d16
 725              	get_next_good_spad:
 726              	.LFB131:
 397:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 398:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** void get_next_good_spad(uint8_t goodSpadArray[], uint32_t size,
 399:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			uint32_t curr, int32_t *next)
 400:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 727              		.loc 1 400 0
 728              		.cfi_startproc
 729              		@ args = 0, pretend = 0, frame = 0
 730              		@ frame_needed = 0, uses_anonymous_args = 0
 731              		@ link register save eliminated.
 732              	.LVL115:
 733 0000 F0B4     		push	{r4, r5, r6, r7}
ARM GAS  /tmp/cc2MNkxp.s 			page 22


 734              	.LCFI17:
 735              		.cfi_def_cfa_offset 16
 736              		.cfi_offset 4, -16
 737              		.cfi_offset 5, -12
 738              		.cfi_offset 6, -8
 739              		.cfi_offset 7, -4
 740              	.LVL116:
 401:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t startIndex;
 402:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t fineOffset;
 403:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 404:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 405:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 406:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t dataByte;
 407:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t success = 0;
 408:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 409:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/*
 410:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * Starting with the current good spad, loop through the array to find
 411:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * the next. i.e. the next bit set in the sequence.
 412:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 *
 413:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * The coarse index is the byte index of the array and the fine index is
 414:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * the index of the bit within each byte.
 415:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 416:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 417:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	*next = -1;
 741              		.loc 1 417 0
 742 0002 4FF0FF34 		mov	r4, #-1
 743 0006 1C60     		str	r4, [r3]
 418:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 419:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	startIndex = curr / cSpadsPerByte;
 744              		.loc 1 419 0
 745 0008 4FEAD20C 		lsr	ip, r2, #3
 746              	.LVL117:
 420:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	fineOffset = curr % cSpadsPerByte;
 747              		.loc 1 420 0
 748 000c 02F00702 		and	r2, r2, #7
 749              	.LVL118:
 421:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 422:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	for (coarseIndex = startIndex; ((coarseIndex < size) && !success);
 750              		.loc 1 422 0
 751 0010 6646     		mov	r6, ip
 407:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 752              		.loc 1 407 0
 753 0012 0027     		movs	r7, #0
 754              		.loc 1 422 0
 755 0014 08E0     		b	.L64
 756              	.LVL119:
 757              	.L74:
 423:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 424:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 425:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 426:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 427:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (coarseIndex == startIndex) {
 428:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 429:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * spad bit before iterating */
 430:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			dataByte >>= fineOffset;
 758              		.loc 1 430 0
 759 0016 1541     		asrs	r5, r5, r2
ARM GAS  /tmp/cc2MNkxp.s 			page 23


 760              	.LVL120:
 761 0018 EDB2     		uxtb	r5, r5
 762              	.LVL121:
 431:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			fineIndex = fineOffset;
 763              		.loc 1 431 0
 764 001a 1446     		mov	r4, r2
 765 001c 0BE0     		b	.L68
 766              	.LVL122:
 767              	.L75:
 432:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 433:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 434:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		while (fineIndex < cSpadsPerByte) {
 435:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 436:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				success = 1;
 437:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				*next = coarseIndex * cSpadsPerByte + fineIndex;
 768              		.loc 1 437 0
 769 001e 04EBC604 		add	r4, r4, r6, lsl #3
 770              	.LVL123:
 771 0022 1C60     		str	r4, [r3]
 436:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				*next = coarseIndex * cSpadsPerByte + fineIndex;
 772              		.loc 1 436 0
 773 0024 0127     		movs	r7, #1
 774              	.LVL124:
 775              	.L67:
 423:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 776              		.loc 1 423 0
 777 0026 0136     		adds	r6, r6, #1
 778              	.LVL125:
 779              	.L64:
 422:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 780              		.loc 1 422 0 discriminator 1
 781 0028 8E42     		cmp	r6, r1
 782 002a 0CD2     		bcs	.L63
 422:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 783              		.loc 1 422 0 is_stmt 0 discriminator 2
 784 002c 5FB9     		cbnz	r7, .L63
 785              	.LVL126:
 425:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 786              		.loc 1 425 0 is_stmt 1
 787 002e 855D     		ldrb	r5, [r0, r6]	@ zero_extendqisi2
 788              	.LVL127:
 427:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 789              		.loc 1 427 0
 790 0030 6645     		cmp	r6, ip
 791 0032 F0D0     		beq	.L74
 424:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 792              		.loc 1 424 0
 793 0034 0024     		movs	r4, #0
 794              	.LVL128:
 795              	.L68:
 434:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 796              		.loc 1 434 0
 797 0036 072C     		cmp	r4, #7
 798 0038 F5D8     		bhi	.L67
 435:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				success = 1;
 799              		.loc 1 435 0
 800 003a 15F0010F 		tst	r5, #1
ARM GAS  /tmp/cc2MNkxp.s 			page 24


 801 003e EED1     		bne	.L75
 438:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 439:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 440:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			dataByte >>= 1;
 802              		.loc 1 440 0
 803 0040 6D08     		lsrs	r5, r5, #1
 804              	.LVL129:
 441:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			fineIndex++;
 805              		.loc 1 441 0
 806 0042 0134     		adds	r4, r4, #1
 807              	.LVL130:
 808 0044 F7E7     		b	.L68
 809              	.LVL131:
 810              	.L63:
 442:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 443:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 444:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 811              		.loc 1 444 0
 812 0046 F0BC     		pop	{r4, r5, r6, r7}
 813              	.LCFI18:
 814              		.cfi_restore 7
 815              		.cfi_restore 6
 816              		.cfi_restore 5
 817              		.cfi_restore 4
 818              		.cfi_def_cfa_offset 0
 819              	.LVL132:
 820 0048 7047     		bx	lr
 821              		.cfi_endproc
 822              	.LFE131:
 824              		.section	.text.is_aperture,"ax",%progbits
 825              		.align	1
 826              		.global	is_aperture
 827              		.syntax unified
 828              		.thumb
 829              		.thumb_func
 830              		.fpu fpv4-sp-d16
 832              	is_aperture:
 833              	.LFB132:
 445:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 446:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 447:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** uint8_t is_aperture(uint32_t spadIndex)
 448:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 834              		.loc 1 448 0
 835              		.cfi_startproc
 836              		@ args = 0, pretend = 0, frame = 0
 837              		@ frame_needed = 0, uses_anonymous_args = 0
 838              		@ link register save eliminated.
 839              	.LVL133:
 449:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/*
 450:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * This function reports if a given spad index is an aperture SPAD by
 451:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * deriving the quadrant.
 452:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 453:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t quadrant;
 454:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t isAperture = 1;
 455:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 840              		.loc 1 455 0
 841 0000 8009     		lsrs	r0, r0, #6
ARM GAS  /tmp/cc2MNkxp.s 			page 25


 842              	.LVL134:
 456:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (refArrayQuadrants[quadrant] == REF_ARRAY_SPAD_0)
 843              		.loc 1 456 0
 844 0002 044B     		ldr	r3, .L80
 845 0004 53F82030 		ldr	r3, [r3, r0, lsl #2]
 846 0008 0BB9     		cbnz	r3, .L79
 457:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		isAperture = 0;
 847              		.loc 1 457 0
 848 000a 0020     		movs	r0, #0
 849              	.LVL135:
 458:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 459:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return isAperture;
 460:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 850              		.loc 1 460 0
 851 000c 7047     		bx	lr
 852              	.LVL136:
 853              	.L79:
 454:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 854              		.loc 1 454 0
 855 000e 0120     		movs	r0, #1
 856              	.LVL137:
 857 0010 7047     		bx	lr
 858              	.L81:
 859 0012 00BF     		.align	2
 860              	.L80:
 861 0014 00000000 		.word	.LANCHOR0
 862              		.cfi_endproc
 863              	.LFE132:
 865              		.section	.text.enable_spad_bit,"ax",%progbits
 866              		.align	1
 867              		.global	enable_spad_bit
 868              		.syntax unified
 869              		.thumb
 870              		.thumb_func
 871              		.fpu fpv4-sp-d16
 873              	enable_spad_bit:
 874              	.LFB133:
 461:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 462:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 463:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error enable_spad_bit(uint8_t spadArray[], uint32_t size,
 464:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t spadIndex)
 465:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 875              		.loc 1 465 0
 876              		.cfi_startproc
 877              		@ args = 0, pretend = 0, frame = 0
 878              		@ frame_needed = 0, uses_anonymous_args = 0
 879              		@ link register save eliminated.
 880              	.LVL138:
 466:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 467:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 468:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 469:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 470:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 471:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	coarseIndex = spadIndex / cSpadsPerByte;
 881              		.loc 1 471 0
 882 0000 D308     		lsrs	r3, r2, #3
 883              	.LVL139:
ARM GAS  /tmp/cc2MNkxp.s 			page 26


 472:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	fineIndex = spadIndex % cSpadsPerByte;
 884              		.loc 1 472 0
 885 0002 02F00702 		and	r2, r2, #7
 886              	.LVL140:
 473:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (coarseIndex >= size)
 887              		.loc 1 473 0
 888 0006 8B42     		cmp	r3, r1
 889 0008 06D2     		bcs	.L84
 474:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 475:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	else
 476:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		spadArray[coarseIndex] |= (1 << fineIndex);
 890              		.loc 1 476 0
 891 000a 0121     		movs	r1, #1
 892              	.LVL141:
 893 000c 9140     		lsls	r1, r1, r2
 894 000e C25C     		ldrb	r2, [r0, r3]	@ zero_extendqisi2
 895              	.LVL142:
 896 0010 0A43     		orrs	r2, r2, r1
 897 0012 C254     		strb	r2, [r0, r3]
 466:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 898              		.loc 1 466 0
 899 0014 0020     		movs	r0, #0
 900              	.LVL143:
 901 0016 7047     		bx	lr
 902              	.LVL144:
 903              	.L84:
 474:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 904              		.loc 1 474 0
 905 0018 6FF03100 		mvn	r0, #49
 906              	.LVL145:
 477:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 478:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return status;
 479:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 907              		.loc 1 479 0
 908 001c 7047     		bx	lr
 909              		.cfi_endproc
 910              	.LFE133:
 912              		.section	.text.count_enabled_spads,"ax",%progbits
 913              		.align	1
 914              		.global	count_enabled_spads
 915              		.syntax unified
 916              		.thumb
 917              		.thumb_func
 918              		.fpu fpv4-sp-d16
 920              	count_enabled_spads:
 921              	.LFB134:
 480:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 481:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error count_enabled_spads(uint8_t spadArray[],
 482:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		uint32_t byteCount, uint32_t maxSpads,
 483:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		uint32_t *pTotalSpadsEnabled, uint8_t *pIsAperture)
 484:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 922              		.loc 1 484 0
 923              		.cfi_startproc
 924              		@ args = 4, pretend = 0, frame = 0
 925              		@ frame_needed = 0, uses_anonymous_args = 0
 926              	.LVL146:
 927 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
ARM GAS  /tmp/cc2MNkxp.s 			page 27


 928              	.LCFI19:
 929              		.cfi_def_cfa_offset 24
 930              		.cfi_offset 4, -24
 931              		.cfi_offset 5, -20
 932              		.cfi_offset 6, -16
 933              		.cfi_offset 7, -12
 934              		.cfi_offset 8, -8
 935              		.cfi_offset 14, -4
 936 0004 069F     		ldr	r7, [sp, #24]
 937              	.LVL147:
 485:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 486:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 487:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t lastByte;
 488:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t lastBit;
 489:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t byteIndex = 0;
 490:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t bitIndex = 0;
 491:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t tempByte;
 492:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t spadTypeIdentified = 0;
 493:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 494:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* The entire array will not be used for spads, therefore the last
 495:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * byte and last bit is determined from the max spads value.
 496:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 497:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 498:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	lastByte = maxSpads / cSpadsPerByte;
 938              		.loc 1 498 0
 939 0006 4FEAD20E 		lsr	lr, r2, #3
 940              	.LVL148:
 499:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	lastBit = maxSpads % cSpadsPerByte;
 941              		.loc 1 499 0
 942 000a 02F0070C 		and	ip, r2, #7
 943              	.LVL149:
 500:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 501:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Check that the max spads value does not exceed the array bounds. */
 502:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (lastByte >= byteCount)
 944              		.loc 1 502 0
 945 000e 8E45     		cmp	lr, r1
 946 0010 05D2     		bcs	.L95
 485:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 947              		.loc 1 485 0
 948 0012 4FF00008 		mov	r8, #0
 949              	.L86:
 950              	.LVL150:
 503:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 504:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 505:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	*pTotalSpadsEnabled = 0;
 951              		.loc 1 505 0
 952 0016 0025     		movs	r5, #0
 953 0018 1D60     		str	r5, [r3]
 492:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 954              		.loc 1 492 0
 955 001a 2E46     		mov	r6, r5
 506:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 507:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Count the bits enabled in the whole bytes */
 508:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	for (byteIndex = 0; byteIndex <= (lastByte - 1); byteIndex++) {
 956              		.loc 1 508 0
 957 001c 1CE0     		b	.L87
 958              	.LVL151:
ARM GAS  /tmp/cc2MNkxp.s 			page 28


 959              	.L95:
 503:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 960              		.loc 1 503 0
 961 001e 6FF03108 		mvn	r8, #49
 962 0022 F8E7     		b	.L86
 963              	.LVL152:
 964              	.L101:
 509:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 510:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 511:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		for (bitIndex = 0; bitIndex <= cSpadsPerByte; bitIndex++) {
 512:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 513:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 514:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 515:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				if (!spadTypeIdentified) {
 516:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 517:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 965              		.loc 1 517 0 discriminator 1
 966 0024 032A     		cmp	r2, #3
 967 0026 12D9     		bls	.L99
 518:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 519:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 968              		.loc 1 519 0
 969 0028 0126     		movs	r6, #1
 970              	.LVL153:
 971              	.L89:
 520:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				}
 521:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 522:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			tempByte >>= 1;
 972              		.loc 1 522 0 discriminator 2
 973 002a 4908     		lsrs	r1, r1, #1
 974              	.LVL154:
 511:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 975              		.loc 1 511 0 discriminator 2
 976 002c 0132     		adds	r2, r2, #1
 977              	.LVL155:
 978              	.L88:
 511:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 979              		.loc 1 511 0 is_stmt 0 discriminator 1
 980 002e 082A     		cmp	r2, #8
 981 0030 11D8     		bhi	.L100
 512:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 982              		.loc 1 512 0 is_stmt 1
 983 0032 11F0010F 		tst	r1, #1
 984 0036 F8D0     		beq	.L89
 513:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 985              		.loc 1 513 0
 986 0038 1C68     		ldr	r4, [r3]
 987 003a 0134     		adds	r4, r4, #1
 988 003c 1C60     		str	r4, [r3]
 515:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 989              		.loc 1 515 0
 990 003e 002E     		cmp	r6, #0
 991 0040 F3D1     		bne	.L89
 516:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 992              		.loc 1 516 0
 993 0042 0124     		movs	r4, #1
 994 0044 3C70     		strb	r4, [r7]
ARM GAS  /tmp/cc2MNkxp.s 			page 29


 517:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 995              		.loc 1 517 0
 996 0046 A542     		cmp	r5, r4
 997 0048 ECD9     		bls	.L101
 519:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				}
 998              		.loc 1 519 0
 999 004a 0126     		movs	r6, #1
 1000              	.LVL156:
 1001 004c EDE7     		b	.L89
 1002              	.LVL157:
 1003              	.L99:
 518:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 1004              		.loc 1 518 0
 1005 004e 0024     		movs	r4, #0
 1006 0050 3C70     		strb	r4, [r7]
 519:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				}
 1007              		.loc 1 519 0
 1008 0052 0126     		movs	r6, #1
 1009              	.LVL158:
 1010 0054 E9E7     		b	.L89
 1011              	.LVL159:
 1012              	.L100:
 508:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1013              		.loc 1 508 0 discriminator 2
 1014 0056 0135     		adds	r5, r5, #1
 1015              	.LVL160:
 1016              	.L87:
 508:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1017              		.loc 1 508 0 is_stmt 0 discriminator 1
 1018 0058 0EF1FF32 		add	r2, lr, #-1
 1019 005c AA42     		cmp	r2, r5
 1020 005e 02D3     		bcc	.L102
 509:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1021              		.loc 1 509 0 is_stmt 1
 1022 0060 415D     		ldrb	r1, [r0, r5]	@ zero_extendqisi2
 1023              	.LVL161:
 511:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1024              		.loc 1 511 0
 1025 0062 0022     		movs	r2, #0
 1026 0064 E3E7     		b	.L88
 1027              	.LVL162:
 1028              	.L102:
 523:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 524:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 525:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 526:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Count the number of bits enabled in the last byte accounting
 527:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * for the fact that not all bits in the byte may be used.
 528:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 529:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	tempByte = spadArray[lastByte];
 1029              		.loc 1 529 0
 1030 0066 10F80E00 		ldrb	r0, [r0, lr]	@ zero_extendqisi2
 1031              	.LVL163:
 530:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 531:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	for (bitIndex = 0; bitIndex <= lastBit; bitIndex++) {
 1032              		.loc 1 531 0
 1033 006a 0022     		movs	r2, #0
 1034 006c 00E0     		b	.L92
ARM GAS  /tmp/cc2MNkxp.s 			page 30


 1035              	.LVL164:
 1036              	.L93:
 1037              		.loc 1 531 0 is_stmt 0 discriminator 2
 1038 006e 0132     		adds	r2, r2, #1
 1039              	.LVL165:
 1040              	.L92:
 1041              		.loc 1 531 0 discriminator 1
 1042 0070 6245     		cmp	r2, ip
 1043 0072 06D8     		bhi	.L103
 532:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 1044              		.loc 1 532 0 is_stmt 1
 1045 0074 10F0010F 		tst	r0, #1
 1046 0078 F9D0     		beq	.L93
 533:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			(*pTotalSpadsEnabled)++;
 1047              		.loc 1 533 0
 1048 007a 1968     		ldr	r1, [r3]
 1049 007c 0131     		adds	r1, r1, #1
 1050 007e 1960     		str	r1, [r3]
 1051 0080 F5E7     		b	.L93
 1052              	.L103:
 534:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 535:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 536:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return status;
 537:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1053              		.loc 1 537 0
 1054 0082 4046     		mov	r0, r8
 1055              	.LVL166:
 1056 0084 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1057              		.cfi_endproc
 1058              	.LFE134:
 1060              		.section	.text.set_ref_spad_map,"ax",%progbits
 1061              		.align	1
 1062              		.global	set_ref_spad_map
 1063              		.syntax unified
 1064              		.thumb
 1065              		.thumb_func
 1066              		.fpu fpv4-sp-d16
 1068              	set_ref_spad_map:
 1069              	.LFB135:
 538:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 539:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error set_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 540:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1070              		.loc 1 540 0
 1071              		.cfi_startproc
 1072              		@ args = 0, pretend = 0, frame = 0
 1073              		@ frame_needed = 0, uses_anonymous_args = 0
 1074              	.LVL167:
 1075 0000 08B5     		push	{r3, lr}
 1076              	.LCFI20:
 1077              		.cfi_def_cfa_offset 8
 1078              		.cfi_offset 3, -8
 1079              		.cfi_offset 14, -4
 541:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_WriteMulti(Dev,
 1080              		.loc 1 541 0
 1081 0002 0623     		movs	r3, #6
 1082 0004 0A46     		mov	r2, r1
 1083 0006 B021     		movs	r1, #176
ARM GAS  /tmp/cc2MNkxp.s 			page 31


 1084              	.LVL168:
 1085 0008 FFF7FEFF 		bl	VL53L0X_WriteMulti
 1086              	.LVL169:
 542:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 543:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				refSpadArray, 6);
 544:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return status;
 545:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1087              		.loc 1 545 0
 1088 000c 08BD     		pop	{r3, pc}
 1089              		.cfi_endproc
 1090              	.LFE135:
 1092              		.section	.text.get_ref_spad_map,"ax",%progbits
 1093              		.align	1
 1094              		.global	get_ref_spad_map
 1095              		.syntax unified
 1096              		.thumb
 1097              		.thumb_func
 1098              		.fpu fpv4-sp-d16
 1100              	get_ref_spad_map:
 1101              	.LFB136:
 546:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 547:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error get_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 548:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1102              		.loc 1 548 0
 1103              		.cfi_startproc
 1104              		@ args = 0, pretend = 0, frame = 0
 1105              		@ frame_needed = 0, uses_anonymous_args = 0
 1106              	.LVL170:
 1107 0000 08B5     		push	{r3, lr}
 1108              	.LCFI21:
 1109              		.cfi_def_cfa_offset 8
 1110              		.cfi_offset 3, -8
 1111              		.cfi_offset 14, -4
 549:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ReadMulti(Dev,
 1112              		.loc 1 549 0
 1113 0002 0623     		movs	r3, #6
 1114 0004 0A46     		mov	r2, r1
 1115 0006 B021     		movs	r1, #176
 1116              	.LVL171:
 1117 0008 FFF7FEFF 		bl	VL53L0X_ReadMulti
 1118              	.LVL172:
 550:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 551:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				refSpadArray,
 552:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				6);
 553:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return status;
 554:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1119              		.loc 1 554 0
 1120 000c 08BD     		pop	{r3, pc}
 1121              		.cfi_endproc
 1122              	.LFE136:
 1124              		.section	.text.enable_ref_spads,"ax",%progbits
 1125              		.align	1
 1126              		.global	enable_ref_spads
 1127              		.syntax unified
 1128              		.thumb
 1129              		.thumb_func
 1130              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc2MNkxp.s 			page 32


 1132              	enable_ref_spads:
 1133              	.LFB137:
 555:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 556:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error enable_ref_spads(VL53L0X_DEV Dev,
 557:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint8_t apertureSpads,
 558:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint8_t goodSpadArray[],
 559:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint8_t spadArray[],
 560:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint32_t size,
 561:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint32_t start,
 562:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint32_t offset,
 563:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint32_t spadCount,
 564:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint32_t *lastSpad)
 565:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1134              		.loc 1 565 0
 1135              		.cfi_startproc
 1136              		@ args = 20, pretend = 0, frame = 24
 1137              		@ frame_needed = 0, uses_anonymous_args = 0
 1138              	.LVL173:
 1139 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1140              	.LCFI22:
 1141              		.cfi_def_cfa_offset 36
 1142              		.cfi_offset 4, -36
 1143              		.cfi_offset 5, -32
 1144              		.cfi_offset 6, -28
 1145              		.cfi_offset 7, -24
 1146              		.cfi_offset 8, -20
 1147              		.cfi_offset 9, -16
 1148              		.cfi_offset 10, -12
 1149              		.cfi_offset 11, -8
 1150              		.cfi_offset 14, -4
 1151 0004 87B0     		sub	sp, sp, #28
 1152              	.LCFI23:
 1153              		.cfi_def_cfa_offset 64
 1154 0006 0190     		str	r0, [sp, #4]
 1155 0008 8B46     		mov	fp, r1
 1156 000a 0092     		str	r2, [sp]
 1157 000c 9846     		mov	r8, r3
 1158 000e 109E     		ldr	r6, [sp, #64]
 1159 0010 DDF844A0 		ldr	r10, [sp, #68]
 1160 0014 129F     		ldr	r7, [sp, #72]
 1161 0016 DDF84C90 		ldr	r9, [sp, #76]
 1162              	.LVL174:
 566:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 567:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t index;
 568:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t i;
 569:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = offset;
 1163              		.loc 1 569 0
 1164 001a 0597     		str	r7, [sp, #20]
 1165              	.LVL175:
 570:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t currentSpad;
 571:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t checkSpadArray[6];
 572:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 573:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/*
 574:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * This function takes in a spad array which may or may not have SPADS
 575:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * already enabled and appends from a given offset a requested number
 576:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * of new SPAD enables. The 'good spad map' is applied to
 577:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * determine the next SPADs to enable.
ARM GAS  /tmp/cc2MNkxp.s 			page 33


 578:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 *
 579:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * This function applies to only aperture or only non-aperture spads.
 580:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * Checks are performed to ensure this.
 581:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 582:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 583:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	currentSpad = offset;
 584:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadCount; index++) {
 1166              		.loc 1 584 0
 1167 001c 0025     		movs	r5, #0
 1168              	.LVL176:
 1169              	.L109:
 1170              		.loc 1 584 0 is_stmt 0 discriminator 1
 1171 001e 4D45     		cmp	r5, r9
 1172 0020 17D2     		bcs	.L120
 585:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1173              		.loc 1 585 0 is_stmt 1
 1174 0022 05AB     		add	r3, sp, #20
 1175 0024 3A46     		mov	r2, r7
 1176 0026 3146     		mov	r1, r6
 1177 0028 0098     		ldr	r0, [sp]
 1178 002a FFF7FEFF 		bl	get_next_good_spad
 1179              	.LVL177:
 586:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			&nextGoodSpad);
 587:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 588:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (nextGoodSpad == -1) {
 1180              		.loc 1 588 0
 1181 002e 059C     		ldr	r4, [sp, #20]
 1182 0030 B4F1FF3F 		cmp	r4, #-1
 1183 0034 15D0     		beq	.L116
 589:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 590:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			break;
 591:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 592:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 593:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Confirm that the next good SPAD is non-aperture */
 594:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (is_aperture(start + nextGoodSpad) != apertureSpads) {
 1184              		.loc 1 594 0
 1185 0036 04EB0A00 		add	r0, r4, r10
 1186 003a FFF7FEFF 		bl	is_aperture
 1187              	.LVL178:
 1188 003e 5845     		cmp	r0, fp
 1189 0040 12D1     		bne	.L117
 1190              	.LVL179:
 595:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 596:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * spads from the current quadrant then this is an error
 597:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 */
 598:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 599:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			break;
 600:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 601:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		currentSpad = (uint32_t)nextGoodSpad;
 602:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		enable_spad_bit(spadArray, size, currentSpad);
 1191              		.loc 1 602 0 discriminator 2
 1192 0042 2246     		mov	r2, r4
 1193 0044 3146     		mov	r1, r6
 1194 0046 4046     		mov	r0, r8
 1195 0048 FFF7FEFF 		bl	enable_spad_bit
 1196              	.LVL180:
 603:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		currentSpad++;
ARM GAS  /tmp/cc2MNkxp.s 			page 34


 1197              		.loc 1 603 0 discriminator 2
 1198 004c 671C     		adds	r7, r4, #1
 1199              	.LVL181:
 584:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1200              		.loc 1 584 0 discriminator 2
 1201 004e 0135     		adds	r5, r5, #1
 1202              	.LVL182:
 1203 0050 E5E7     		b	.L109
 1204              	.L120:
 566:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t index;
 1205              		.loc 1 566 0
 1206 0052 0020     		movs	r0, #0
 1207              	.L110:
 1208              	.LVL183:
 604:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 605:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	*lastSpad = currentSpad;
 1209              		.loc 1 605 0
 1210 0054 149B     		ldr	r3, [sp, #80]
 1211 0056 1F60     		str	r7, [r3]
 606:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 607:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1212              		.loc 1 607 0
 1213 0058 48B1     		cbz	r0, .L121
 1214              	.L112:
 608:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = set_ref_spad_map(Dev, spadArray);
 609:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 610:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 611:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1215              		.loc 1 611 0
 1216 005a 68B1     		cbz	r0, .L122
 1217              	.LVL184:
 1218              	.L113:
 612:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = get_ref_spad_map(Dev, checkSpadArray);
 613:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 614:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		i = 0;
 615:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 616:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Compare spad maps. If not equal report error. */
 617:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		while (i < size) {
 618:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 619:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 620:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 621:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 622:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			i++;
 623:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 624:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 625:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return status;
 626:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1219              		.loc 1 626 0
 1220 005c 07B0     		add	sp, sp, #28
 1221              	.LCFI24:
 1222              		.cfi_remember_state
 1223              		.cfi_def_cfa_offset 36
 1224              	.LVL185:
 1225              		@ sp needed
 1226 005e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1227              	.LVL186:
 1228              	.L116:
ARM GAS  /tmp/cc2MNkxp.s 			page 35


 1229              	.LCFI25:
 1230              		.cfi_restore_state
 589:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			break;
 1231              		.loc 1 589 0
 1232 0062 6FF03100 		mvn	r0, #49
 1233 0066 F5E7     		b	.L110
 1234              	.L117:
 598:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			break;
 1235              		.loc 1 598 0
 1236 0068 6FF03100 		mvn	r0, #49
 1237 006c F2E7     		b	.L110
 1238              	.LVL187:
 1239              	.L121:
 608:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1240              		.loc 1 608 0
 1241 006e 4146     		mov	r1, r8
 1242 0070 0198     		ldr	r0, [sp, #4]
 1243              	.LVL188:
 1244 0072 FFF7FEFF 		bl	set_ref_spad_map
 1245              	.LVL189:
 1246 0076 F0E7     		b	.L112
 1247              	.L122:
 612:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1248              		.loc 1 612 0
 1249 0078 03A9     		add	r1, sp, #12
 1250 007a 0198     		ldr	r0, [sp, #4]
 1251              	.LVL190:
 1252 007c FFF7FEFF 		bl	get_ref_spad_map
 1253              	.LVL191:
 614:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1254              		.loc 1 614 0
 1255 0080 0023     		movs	r3, #0
 1256              	.LVL192:
 1257              	.L114:
 617:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1258              		.loc 1 617 0
 1259 0082 B342     		cmp	r3, r6
 1260 0084 EAD2     		bcs	.L113
 618:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1261              		.loc 1 618 0
 1262 0086 18F80310 		ldrb	r1, [r8, r3]	@ zero_extendqisi2
 1263 008a 06AA     		add	r2, sp, #24
 1264 008c 1A44     		add	r2, r2, r3
 1265 008e 12F80C2C 		ldrb	r2, [r2, #-12]	@ zero_extendqisi2
 1266 0092 9142     		cmp	r1, r2
 1267 0094 01D1     		bne	.L118
 622:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 1268              		.loc 1 622 0
 1269 0096 0133     		adds	r3, r3, #1
 1270              	.LVL193:
 1271 0098 F3E7     		b	.L114
 1272              	.L118:
 619:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 1273              		.loc 1 619 0
 1274 009a 6FF03100 		mvn	r0, #49
 1275              	.LVL194:
 1276 009e DDE7     		b	.L113
ARM GAS  /tmp/cc2MNkxp.s 			page 36


 1277              		.cfi_endproc
 1278              	.LFE137:
 1280              		.section	.text.perform_ref_signal_measurement,"ax",%progbits
 1281              		.align	1
 1282              		.global	perform_ref_signal_measurement
 1283              		.syntax unified
 1284              		.thumb
 1285              		.thumb_func
 1286              		.fpu fpv4-sp-d16
 1288              	perform_ref_signal_measurement:
 1289              	.LFB138:
 627:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 628:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 629:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error perform_ref_signal_measurement(VL53L0X_DEV Dev,
 630:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		uint16_t *refSignalRate)
 631:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1290              		.loc 1 631 0
 1291              		.cfi_startproc
 1292              		@ args = 0, pretend = 0, frame = 32
 1293              		@ frame_needed = 0, uses_anonymous_args = 0
 1294              	.LVL195:
 1295 0000 70B5     		push	{r4, r5, r6, lr}
 1296              	.LCFI26:
 1297              		.cfi_def_cfa_offset 16
 1298              		.cfi_offset 4, -16
 1299              		.cfi_offset 5, -12
 1300              		.cfi_offset 6, -8
 1301              		.cfi_offset 14, -4
 1302 0002 88B0     		sub	sp, sp, #32
 1303              	.LCFI27:
 1304              		.cfi_def_cfa_offset 48
 1305 0004 0446     		mov	r4, r0
 1306 0006 0E46     		mov	r6, r1
 1307              	.LVL196:
 632:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 633:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t rangingMeasurementData;
 634:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 635:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 636:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 637:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
 638:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
 639:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 640:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 641:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1308              		.loc 1 641 0
 1309 0008 90F83051 		ldrb	r5, [r0, #304]	@ zero_extendqisi2
 1310              	.LVL197:
 642:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 643:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/*
 644:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * This function performs a reference signal rate measurement.
 645:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 646:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 647:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev,
 1311              		.loc 1 647 0
 1312 000c C022     		movs	r2, #192
 1313 000e 0121     		movs	r1, #1
 1314              	.LVL198:
ARM GAS  /tmp/cc2MNkxp.s 			page 37


 1315 0010 FFF7FEFF 		bl	VL53L0X_WrByte
 1316              	.LVL199:
 648:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0xC0);
 649:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 650:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1317              		.loc 1 650 0
 1318 0014 0346     		mov	r3, r0
 1319 0016 30B1     		cbz	r0, .L130
 1320              	.LVL200:
 1321              	.L124:
 651:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 652:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 653:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 654:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1322              		.loc 1 654 0
 1323 0018 5BB1     		cbz	r3, .L131
 1324              	.L125:
 655:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 656:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 657:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1325              		.loc 1 657 0
 1326 001a 8BB1     		cbz	r3, .L132
 1327              	.L126:
 658:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_RdWord(Dev,
 659:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 660:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			refSignalRate);
 661:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 662:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1328              		.loc 1 662 0
 1329 001c BBB1     		cbz	r3, .L133
 1330              	.L127:
 663:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 664:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 665:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1331              		.loc 1 665 0
 1332 001e EBB1     		cbz	r3, .L134
 1333              	.LVL201:
 1334              	.L128:
 666:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
 667:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 668:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
 669:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (status == VL53L0X_ERROR_NONE)
 670:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 671:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 672:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 673:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return status;
 674:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1335              		.loc 1 674 0
 1336 0020 1846     		mov	r0, r3
 1337 0022 08B0     		add	sp, sp, #32
 1338              	.LCFI28:
 1339              		.cfi_remember_state
 1340              		.cfi_def_cfa_offset 16
 1341              		@ sp needed
 1342 0024 70BD     		pop	{r4, r5, r6, pc}
 1343              	.LVL202:
 1344              	.L130:
ARM GAS  /tmp/cc2MNkxp.s 			page 38


 1345              	.LCFI29:
 1346              		.cfi_restore_state
 651:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 1347              		.loc 1 651 0
 1348 0026 01A9     		add	r1, sp, #4
 1349 0028 2046     		mov	r0, r4
 1350              	.LVL203:
 1351 002a FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 1352              	.LVL204:
 1353 002e 0346     		mov	r3, r0
 1354              	.LVL205:
 1355 0030 F2E7     		b	.L124
 1356              	.L131:
 655:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1357              		.loc 1 655 0
 1358 0032 0122     		movs	r2, #1
 1359 0034 FF21     		movs	r1, #255
 1360 0036 2046     		mov	r0, r4
 1361 0038 FFF7FEFF 		bl	VL53L0X_WrByte
 1362              	.LVL206:
 1363 003c 0346     		mov	r3, r0
 1364              	.LVL207:
 1365 003e ECE7     		b	.L125
 1366              	.L132:
 658:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 1367              		.loc 1 658 0
 1368 0040 3246     		mov	r2, r6
 1369 0042 B621     		movs	r1, #182
 1370 0044 2046     		mov	r0, r4
 1371 0046 FFF7FEFF 		bl	VL53L0X_RdWord
 1372              	.LVL208:
 1373 004a 0346     		mov	r3, r0
 1374              	.LVL209:
 1375 004c E6E7     		b	.L126
 1376              	.L133:
 663:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1377              		.loc 1 663 0
 1378 004e 0022     		movs	r2, #0
 1379 0050 FF21     		movs	r1, #255
 1380 0052 2046     		mov	r0, r4
 1381 0054 FFF7FEFF 		bl	VL53L0X_WrByte
 1382              	.LVL210:
 1383 0058 0346     		mov	r3, r0
 1384              	.LVL211:
 1385 005a E0E7     		b	.L127
 1386              	.L134:
 667:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
 1387              		.loc 1 667 0
 1388 005c 2A46     		mov	r2, r5
 1389 005e 0121     		movs	r1, #1
 1390 0060 2046     		mov	r0, r4
 1391 0062 FFF7FEFF 		bl	VL53L0X_WrByte
 1392              	.LVL212:
 669:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1393              		.loc 1 669 0
 1394 0066 0346     		mov	r3, r0
 1395 0068 0028     		cmp	r0, #0
ARM GAS  /tmp/cc2MNkxp.s 			page 39


 1396 006a D9D1     		bne	.L128
 670:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 1397              		.loc 1 670 0
 1398 006c 84F83051 		strb	r5, [r4, #304]
 1399 0070 D6E7     		b	.L128
 1400              		.cfi_endproc
 1401              	.LFE138:
 1403              		.section	.text.VL53L0X_set_reference_spads,"ax",%progbits
 1404              		.align	1
 1405              		.global	VL53L0X_set_reference_spads
 1406              		.syntax unified
 1407              		.thumb
 1408              		.thumb_func
 1409              		.fpu fpv4-sp-d16
 1411              	VL53L0X_set_reference_spads:
 1412              	.LFB140:
 675:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 676:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_spad_management(VL53L0X_DEV Dev,
 677:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint32_t *refSpadCount,
 678:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				uint8_t *isApertureSpads)
 679:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 680:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 681:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t lastSpadArray[6];
 682:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 683:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t minimumSpadCount = 3;
 684:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 685:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 686:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex = 0;
 687:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 688:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 689:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t peakSignalRateRef;
 690:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t needAptSpads = 0;
 691:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t index = 0;
 692:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 693:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t signalRateDiff = 0;
 694:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t lastSignalRateDiff = 0;
 695:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t complete = 0;
 696:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 697:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 698:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 699:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 700:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 701:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/*
 702:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * The reference SPAD initialization procedure determines the minimum
 703:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * amount of reference spads to be enables to achieve a target reference
 704:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * signal rate and should be performed once during initialization.
 705:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 *
 706:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * Either aperture or non-aperture spads are applied but never both.
 707:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * Firstly non-aperture spads are set, begining with 5 spads, and
 708:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * increased one spad at a time until the closest measurement to the
 709:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * target rate is achieved.
 710:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 *
 711:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * If the target rate is exceeded when 5 non-aperture spads are enabled,
 712:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * initialization is performed instead with aperture spads.
 713:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 *
 714:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * When setting spads, a 'Good Spad Map' is applied.
 715:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 *
ARM GAS  /tmp/cc2MNkxp.s 			page 40


 716:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * This procedure operates within a SPAD window of interest of a maximum
 717:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * 44 spads.
 718:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * The start point is currently fixed to 180, which lies towards the end
 719:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * of the non-aperture quadrant and runs in to the adjacent aperture
 720:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * quadrant.
 721:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 722:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 723:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 724:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	targetRefRate = PALDevDataGet(Dev, targetRefRate);
 725:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 726:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/*
 727:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * Initialize Spad arrays.
 728:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * Currently the good spad map is initialised to 'All good'.
 729:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * This is a short term implementation. The good spad map will be
 730:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * provided as an input.
 731:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * Note that there are 6 bytes. Only the first 44 bits will be used to
 732:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * represent spads.
 733:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 734:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 735:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 736:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 737:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 738:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 739:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 740:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 741:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 742:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 743:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 744:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 745:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 746:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 747:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 748:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 749:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 750:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 751:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 752:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 753:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 754:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			startSelect);
 755:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 756:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 757:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 758:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 759:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 760:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 761:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Perform ref calibration */
 762:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 763:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 764:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 765:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 766:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 767:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 768:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		currentSpadIndex = 0;
 769:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		lastSpadIndex = currentSpadIndex;
 770:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 771:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = enable_ref_spads(Dev,
 772:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					needAptSpads,
ARM GAS  /tmp/cc2MNkxp.s 			page 41


 773:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 774:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 775:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					spadArraySize,
 776:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					startSelect,
 777:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 778:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 779:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 780:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 781:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 782:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 783:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 784:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 785:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = perform_ref_signal_measurement(Dev,
 786:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 787:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if ((Status == VL53L0X_ERROR_NONE) &&
 788:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 789:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 790:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * switch to APERTURE SPADs */
 791:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 792:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			for (index = 0; index < spadArraySize; index++)
 793:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 794:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 795:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 796:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Increment to the first APERTURE spad */
 797:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			while ((is_aperture(startSelect + currentSpadIndex)
 798:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 799:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 800:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 801:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 802:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			needAptSpads = 1;
 803:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 804:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = enable_ref_spads(Dev,
 805:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					needAptSpads,
 806:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 807:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 808:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					spadArraySize,
 809:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					startSelect,
 810:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 811:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 812:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 813:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 814:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 815:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 816:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 817:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 818:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 819:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				if ((Status == VL53L0X_ERROR_NONE) &&
 820:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 821:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 822:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					 * setting the minimum number of
 823:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					 * APERTURE spads. Can do no more
 824:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					 * therefore set the min number of
 825:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					 * aperture spads as the result.
 826:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					 */
 827:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					isApertureSpads_int = 1;
 828:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 829:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				}
ARM GAS  /tmp/cc2MNkxp.s 			page 42


 830:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 831:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		} else {
 832:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			needAptSpads = 0;
 833:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 834:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 835:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 836:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) &&
 837:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 838:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 839:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * or non-aperture spads have been set. Proceed to add
 840:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * spads and perform measurements until the target
 841:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 * reference is reached.
 842:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		 */
 843:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		isApertureSpads_int = needAptSpads;
 844:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 845:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 846:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		memcpy(lastSpadArray, Dev->Data.SpadData.RefSpadEnables,
 847:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				spadArraySize);
 848:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		lastSignalRateDiff = abs(peakSignalRateRef -
 849:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			targetRefRate);
 850:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		complete = 0;
 851:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 852:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		while (!complete) {
 853:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 854:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 855:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				spadArraySize, currentSpadIndex,
 856:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				&nextGoodSpad);
 857:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 858:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (nextGoodSpad == -1) {
 859:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 860:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 861:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 862:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 863:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Cannot combine Aperture and Non-Aperture spads, so
 864:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * ensure the current spad is of the correct type.
 865:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 */
 866:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (is_aperture((uint32_t)startSelect + nextGoodSpad) !=
 867:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					needAptSpads) {
 868:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				/* At this point we have enabled the maximum
 869:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 * number of Aperture spads.
 870:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 */
 871:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				complete = 1;
 872:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 873:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 874:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 875:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			(refSpadCount_int)++;
 876:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 877:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			currentSpadIndex = nextGoodSpad;
 878:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = enable_spad_bit(
 879:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 880:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 881:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 882:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 883:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 884:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 885:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 * perform measurement. */
 886:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Status = set_ref_spad_map(Dev,
ARM GAS  /tmp/cc2MNkxp.s 			page 43


 887:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 888:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 889:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 890:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 891:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 892:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 893:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = perform_ref_signal_measurement(Dev,
 894:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 895:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 896:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 897:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 898:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 899:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			signalRateDiff = abs(peakSignalRateRef - targetRefRate);
 900:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 901:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (peakSignalRateRef > targetRefRate) {
 902:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 903:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 * measurement closest to the target rate,
 904:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 * either above or below it.
 905:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 */
 906:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				if (signalRateDiff > lastSignalRateDiff) {
 907:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 908:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					 * measurement, so choose this. */
 909:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Status = set_ref_spad_map(Dev,
 910:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							lastSpadArray);
 911:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					memcpy(
 912:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 913:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					lastSpadArray, spadArraySize);
 914:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 915:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					(refSpadCount_int)--;
 916:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				}
 917:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				complete = 1;
 918:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			} else {
 919:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				/* Continue to add spads */
 920:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				lastSignalRateDiff = signalRateDiff;
 921:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 922:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 923:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					spadArraySize);
 924:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 925:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 926:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		} /* while */
 927:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 928:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 929:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 930:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 931:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 932:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 933:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 934:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 935:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 936:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 937:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 938:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 939:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 940:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
 941:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 942:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 943:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_reference_spads(VL53L0X_DEV Dev,
ARM GAS  /tmp/cc2MNkxp.s 			page 44


 944:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				 uint32_t count, uint8_t isApertureSpads)
 945:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1413              		.loc 1 945 0
 1414              		.cfi_startproc
 1415              		@ args = 0, pretend = 0, frame = 8
 1416              		@ frame_needed = 0, uses_anonymous_args = 0
 1417              	.LVL213:
 1418 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1419              	.LCFI30:
 1420              		.cfi_def_cfa_offset 20
 1421              		.cfi_offset 4, -20
 1422              		.cfi_offset 5, -16
 1423              		.cfi_offset 6, -12
 1424              		.cfi_offset 7, -8
 1425              		.cfi_offset 14, -4
 1426 0002 89B0     		sub	sp, sp, #36
 1427              	.LCFI31:
 1428              		.cfi_def_cfa_offset 56
 1429 0004 0546     		mov	r5, r0
 1430 0006 0F46     		mov	r7, r1
 1431 0008 1646     		mov	r6, r2
 1432              	.LVL214:
 946:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 947:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 948:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 949:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 950:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 951:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex;
 952:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t index;
 953:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 954:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/*
 955:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * This function applies a requested number of reference spads, either
 956:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * aperture or
 957:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * non-aperture, as requested.
 958:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * The good spad map will be applied.
 959:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
 960:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 961:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1433              		.loc 1 961 0
 1434 000a 0122     		movs	r2, #1
 1435              	.LVL215:
 1436 000c FF21     		movs	r1, #255
 1437              	.LVL216:
 1438 000e FFF7FEFF 		bl	VL53L0X_WrByte
 1439              	.LVL217:
 962:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 963:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1440              		.loc 1 963 0
 1441 0012 0346     		mov	r3, r0
 1442 0014 20B1     		cbz	r0, .L148
 1443              	.LVL218:
 1444              	.L136:
 964:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 965:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 966:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 967:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1445              		.loc 1 967 0
ARM GAS  /tmp/cc2MNkxp.s 			page 45


 1446 0016 53B1     		cbz	r3, .L149
 1447              	.L137:
 968:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 969:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 970:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 971:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1448              		.loc 1 971 0
 1449 0018 83B1     		cbz	r3, .L150
 1450              	.L138:
 972:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 973:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 974:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1451              		.loc 1 974 0
 1452 001a B3B1     		cbz	r3, .L151
 1453              	.LVL219:
 1454              	.L139:
 945:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 1455              		.loc 1 945 0 discriminator 1
 1456 001c 0023     		movs	r3, #0
 1457 001e 1FE0     		b	.L140
 1458              	.LVL220:
 1459              	.L148:
 964:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 1460              		.loc 1 964 0
 1461 0020 0022     		movs	r2, #0
 1462 0022 4F21     		movs	r1, #79
 1463 0024 2846     		mov	r0, r5
 1464              	.LVL221:
 1465 0026 FFF7FEFF 		bl	VL53L0X_WrByte
 1466              	.LVL222:
 1467 002a 0346     		mov	r3, r0
 1468              	.LVL223:
 1469 002c F3E7     		b	.L136
 1470              	.L149:
 968:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 1471              		.loc 1 968 0
 1472 002e 2C22     		movs	r2, #44
 1473 0030 4E21     		movs	r1, #78
 1474 0032 2846     		mov	r0, r5
 1475 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 1476              	.LVL224:
 1477 0038 0346     		mov	r3, r0
 1478              	.LVL225:
 1479 003a EDE7     		b	.L137
 1480              	.L150:
 972:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1481              		.loc 1 972 0
 1482 003c 0022     		movs	r2, #0
 1483 003e FF21     		movs	r1, #255
 1484 0040 2846     		mov	r0, r5
 1485 0042 FFF7FEFF 		bl	VL53L0X_WrByte
 1486              	.LVL226:
 1487 0046 0346     		mov	r3, r0
 1488              	.LVL227:
 1489 0048 E7E7     		b	.L138
 1490              	.L151:
 975:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
ARM GAS  /tmp/cc2MNkxp.s 			page 46


 1491              		.loc 1 975 0
 1492 004a B422     		movs	r2, #180
 1493 004c B621     		movs	r1, #182
 1494 004e 2846     		mov	r0, r5
 1495 0050 FFF7FEFF 		bl	VL53L0X_WrByte
 1496              	.LVL228:
 1497 0054 E2E7     		b	.L139
 1498              	.LVL229:
 1499              	.L141:
 976:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 977:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			startSelect);
 978:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 979:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 980:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1500              		.loc 1 980 0 discriminator 3
 1501 0056 EA18     		adds	r2, r5, r3
 1502 0058 0021     		movs	r1, #0
 1503 005a 82F82411 		strb	r1, [r2, #292]
 979:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1504              		.loc 1 979 0 discriminator 3
 1505 005e 0133     		adds	r3, r3, #1
 1506              	.LVL230:
 1507              	.L140:
 979:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1508              		.loc 1 979 0 is_stmt 0 discriminator 1
 1509 0060 052B     		cmp	r3, #5
 1510 0062 F8D9     		bls	.L141
 981:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 982:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (isApertureSpads) {
 1511              		.loc 1 982 0 is_stmt 1
 1512 0064 36BB     		cbnz	r6, .L146
 947:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1513              		.loc 1 947 0
 1514 0066 0024     		movs	r4, #0
 1515              	.LVL231:
 1516              	.L143:
 983:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Increment to the first APERTURE spad */
 984:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		while ((is_aperture(startSelect + currentSpadIndex) == 0) &&
 985:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 986:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			currentSpadIndex++;
 987:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 988:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 989:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = enable_ref_spads(Dev,
 1517              		.loc 1 989 0
 1518 0068 07AB     		add	r3, sp, #28
 1519 006a 0493     		str	r3, [sp, #16]
 1520 006c 0397     		str	r7, [sp, #12]
 1521 006e 0294     		str	r4, [sp, #8]
 1522 0070 B423     		movs	r3, #180
 1523 0072 0193     		str	r3, [sp, #4]
 1524 0074 0623     		movs	r3, #6
 1525 0076 0093     		str	r3, [sp]
 1526 0078 05F59273 		add	r3, r5, #292
 1527 007c 05F59572 		add	r2, r5, #298
 1528 0080 3146     		mov	r1, r6
 1529 0082 2846     		mov	r0, r5
 1530 0084 FFF7FEFF 		bl	enable_ref_spads
ARM GAS  /tmp/cc2MNkxp.s 			page 47


 1531              	.LVL232:
 990:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				isApertureSpads,
 991:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 992:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables,
 993:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				spadArraySize,
 994:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				startSelect,
 995:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				currentSpadIndex,
 996:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				count,
 997:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				&lastSpadIndex);
 998:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 999:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 1532              		.loc 1 999 0
 1533 0088 0346     		mov	r3, r0
 1534 008a 30B9     		cbnz	r0, .L145
1000:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 1535              		.loc 1 1000 0
 1536 008c 0122     		movs	r2, #1
 1537 008e 85F81521 		strb	r2, [r5, #277]
1001:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1538              		.loc 1 1001 0
 1539 0092 85F81371 		strb	r7, [r5, #275]
1002:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(count));
1003:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1540              		.loc 1 1003 0
 1541 0096 85F81461 		strb	r6, [r5, #276]
 1542              	.L145:
1004:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadType, isApertureSpads);
1005:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
1006:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1007:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1008:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1543              		.loc 1 1008 0
 1544 009a 1846     		mov	r0, r3
 1545              	.LVL233:
 1546 009c 09B0     		add	sp, sp, #36
 1547              	.LCFI32:
 1548              		.cfi_remember_state
 1549              		.cfi_def_cfa_offset 20
 1550              		@ sp needed
 1551 009e F0BD     		pop	{r4, r5, r6, r7, pc}
 1552              	.LVL234:
 1553              	.L144:
 1554              	.LCFI33:
 1555              		.cfi_restore_state
 986:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 1556              		.loc 1 986 0
 1557 00a0 0134     		adds	r4, r4, #1
 1558              	.LVL235:
 1559              	.L142:
 984:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1560              		.loc 1 984 0
 1561 00a2 04F1B400 		add	r0, r4, #180
 1562 00a6 FFF7FEFF 		bl	is_aperture
 1563              	.LVL236:
 1564 00aa 0028     		cmp	r0, #0
 1565 00ac DCD1     		bne	.L143
 984:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
ARM GAS  /tmp/cc2MNkxp.s 			page 48


 1566              		.loc 1 984 0 is_stmt 0 discriminator 1
 1567 00ae 2B2C     		cmp	r4, #43
 1568 00b0 F6D9     		bls	.L144
 1569 00b2 D9E7     		b	.L143
 1570              	.LVL237:
 1571              	.L146:
 947:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1572              		.loc 1 947 0 is_stmt 1
 1573 00b4 0024     		movs	r4, #0
 1574 00b6 F4E7     		b	.L142
 1575              		.cfi_endproc
 1576              	.LFE140:
 1578              		.section	.text.VL53L0X_get_reference_spads,"ax",%progbits
 1579              		.align	1
 1580              		.global	VL53L0X_get_reference_spads
 1581              		.syntax unified
 1582              		.thumb
 1583              		.thumb_func
 1584              		.fpu fpv4-sp-d16
 1586              	VL53L0X_get_reference_spads:
 1587              	.LFB141:
1009:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1010:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_reference_spads(VL53L0X_DEV Dev,
1011:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			uint32_t *pSpadCount, uint8_t *pIsApertureSpads)
1012:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1588              		.loc 1 1012 0
 1589              		.cfi_startproc
 1590              		@ args = 0, pretend = 0, frame = 16
 1591              		@ frame_needed = 0, uses_anonymous_args = 0
 1592              	.LVL238:
 1593 0000 70B5     		push	{r4, r5, r6, lr}
 1594              	.LCFI34:
 1595              		.cfi_def_cfa_offset 16
 1596              		.cfi_offset 4, -16
 1597              		.cfi_offset 5, -12
 1598              		.cfi_offset 6, -8
 1599              		.cfi_offset 14, -4
 1600 0002 86B0     		sub	sp, sp, #24
 1601              	.LCFI35:
 1602              		.cfi_def_cfa_offset 40
 1603              	.LVL239:
1013:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1014:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
1015:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t refSpadArray[6];
1016:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t cMaxSpadCount = 44;
1017:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t cSpadArraySize = 6;
1018:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t spadsEnabled;
1019:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t isApertureSpads = 0;
 1604              		.loc 1 1019 0
 1605 0004 0023     		movs	r3, #0
 1606 0006 8DF80B30 		strb	r3, [sp, #11]
1020:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1021:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	refSpadsInitialised = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1607              		.loc 1 1021 0
 1608 000a 90F81531 		ldrb	r3, [r0, #277]	@ zero_extendqisi2
 1609              	.LVL240:
1022:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					RefSpadsInitialised);
ARM GAS  /tmp/cc2MNkxp.s 			page 49


1023:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1024:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (refSpadsInitialised == 1) {
 1610              		.loc 1 1024 0
 1611 000e 012B     		cmp	r3, #1
 1612 0010 1FD0     		beq	.L156
 1613 0012 1646     		mov	r6, r2
 1614 0014 0D46     		mov	r5, r1
 1615 0016 0446     		mov	r4, r0
1025:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1026:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*pSpadCount = (uint32_t)VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
1027:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadCount);
1028:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*pIsApertureSpads = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
1029:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadType);
1030:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	} else {
1031:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1032:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* obtain spad info from device.*/
1033:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = get_ref_spad_map(Dev, refSpadArray);
 1616              		.loc 1 1033 0
 1617 0018 04A9     		add	r1, sp, #16
 1618              	.LVL241:
 1619 001a FFF7FEFF 		bl	get_ref_spad_map
 1620              	.LVL242:
1034:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1035:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 1621              		.loc 1 1035 0
 1622 001e 0346     		mov	r3, r0
 1623 0020 F0B9     		cbnz	r0, .L154
1036:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* count enabled spads within spad map array and
1037:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 * determine if Aperture or Non-Aperture.
1038:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			 */
1039:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status = count_enabled_spads(refSpadArray,
 1624              		.loc 1 1039 0
 1625 0022 0DF10B03 		add	r3, sp, #11
 1626 0026 0093     		str	r3, [sp]
 1627 0028 03AB     		add	r3, sp, #12
 1628 002a 2C22     		movs	r2, #44
 1629 002c 0621     		movs	r1, #6
 1630 002e 04A8     		add	r0, sp, #16
 1631              	.LVL243:
 1632 0030 FFF7FEFF 		bl	count_enabled_spads
 1633              	.LVL244:
1040:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							cSpadArraySize,
1041:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							cMaxSpadCount,
1042:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							&spadsEnabled,
1043:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							&isApertureSpads);
1044:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1045:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 1634              		.loc 1 1045 0
 1635 0034 0346     		mov	r3, r0
 1636 0036 98B9     		cbnz	r0, .L154
1046:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1047:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				*pSpadCount = spadsEnabled;
 1637              		.loc 1 1047 0
 1638 0038 0399     		ldr	r1, [sp, #12]
 1639 003a 2960     		str	r1, [r5]
1048:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				*pIsApertureSpads = isApertureSpads;
 1640              		.loc 1 1048 0
ARM GAS  /tmp/cc2MNkxp.s 			page 50


 1641 003c 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 1642 0040 3270     		strb	r2, [r6]
1049:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1050:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1643              		.loc 1 1050 0
 1644 0042 0120     		movs	r0, #1
 1645              	.LVL245:
 1646 0044 84F81501 		strb	r0, [r4, #277]
1051:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					RefSpadsInitialised, 1);
1052:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1647              		.loc 1 1052 0
 1648 0048 84F81311 		strb	r1, [r4, #275]
1053:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					ReferenceSpadCount,
1054:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					(uint8_t)spadsEnabled);
1055:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1649              		.loc 1 1055 0
 1650 004c 84F81421 		strb	r2, [r4, #276]
 1651 0050 06E0     		b	.L154
 1652              	.LVL246:
 1653              	.L156:
1026:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadCount);
 1654              		.loc 1 1026 0
 1655 0052 90F81331 		ldrb	r3, [r0, #275]	@ zero_extendqisi2
 1656              	.LVL247:
 1657 0056 0B60     		str	r3, [r1]
 1658              	.LVL248:
1028:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadType);
 1659              		.loc 1 1028 0
 1660 0058 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 1661 005c 1370     		strb	r3, [r2]
1013:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
 1662              		.loc 1 1013 0
 1663 005e 0023     		movs	r3, #0
 1664              	.LVL249:
 1665              	.L154:
1056:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					ReferenceSpadType, isApertureSpads);
1057:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
1058:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
1059:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
1060:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1061:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1062:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1666              		.loc 1 1062 0
 1667 0060 1846     		mov	r0, r3
 1668 0062 06B0     		add	sp, sp, #24
 1669              	.LCFI36:
 1670              		.cfi_def_cfa_offset 16
 1671              		@ sp needed
 1672 0064 70BD     		pop	{r4, r5, r6, pc}
 1673              		.cfi_endproc
 1674              	.LFE141:
 1676              		.section	.text.VL53L0X_perform_single_ref_calibration,"ax",%progbits
 1677              		.align	1
 1678              		.global	VL53L0X_perform_single_ref_calibration
 1679              		.syntax unified
 1680              		.thumb
 1681              		.thumb_func
ARM GAS  /tmp/cc2MNkxp.s 			page 51


 1682              		.fpu fpv4-sp-d16
 1684              	VL53L0X_perform_single_ref_calibration:
 1685              	.LFB142:
1063:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1064:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1065:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_single_ref_calibration(VL53L0X_DEV Dev,
1066:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		uint8_t vhv_init_byte)
1067:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1686              		.loc 1 1067 0
 1687              		.cfi_startproc
 1688              		@ args = 0, pretend = 0, frame = 0
 1689              		@ frame_needed = 0, uses_anonymous_args = 0
 1690              	.LVL250:
 1691 0000 10B5     		push	{r4, lr}
 1692              	.LCFI37:
 1693              		.cfi_def_cfa_offset 8
 1694              		.cfi_offset 4, -8
 1695              		.cfi_offset 14, -4
 1696 0002 0446     		mov	r4, r0
 1697              	.LVL251:
1068:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1069:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1070:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
1071:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START,
 1698              		.loc 1 1071 0
 1699 0004 41F00102 		orr	r2, r1, #1
 1700 0008 0021     		movs	r1, #0
 1701              	.LVL252:
 1702 000a FFF7FEFF 		bl	VL53L0X_WrByte
 1703              	.LVL253:
1072:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_REG_SYSRANGE_MODE_START_STOP |
1073:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				vhv_init_byte);
1074:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1075:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1704              		.loc 1 1075 0
 1705 000e 0346     		mov	r3, r0
 1706 0010 18B1     		cbz	r0, .L162
 1707              	.LVL254:
 1708              	.L158:
1076:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_measurement_poll_for_completion(Dev);
1077:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1078:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1709              		.loc 1 1078 0
 1710 0012 3BB1     		cbz	r3, .L163
 1711              	.L159:
1079:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ClearInterruptMask(Dev, 0);
1080:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1081:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1712              		.loc 1 1081 0
 1713 0014 63B1     		cbz	r3, .L164
 1714              	.L160:
1082:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START, 0x00);
1083:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1084:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1085:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1715              		.loc 1 1085 0
 1716 0016 1846     		mov	r0, r3
ARM GAS  /tmp/cc2MNkxp.s 			page 52


 1717 0018 10BD     		pop	{r4, pc}
 1718              	.LVL255:
 1719              	.L162:
1076:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 1720              		.loc 1 1076 0
 1721 001a 2046     		mov	r0, r4
 1722              	.LVL256:
 1723 001c FFF7FEFF 		bl	VL53L0X_measurement_poll_for_completion
 1724              	.LVL257:
 1725 0020 0346     		mov	r3, r0
 1726              	.LVL258:
 1727 0022 F6E7     		b	.L158
 1728              	.L163:
1079:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ClearInterruptMask(Dev, 0);
 1729              		.loc 1 1079 0
 1730 0024 0021     		movs	r1, #0
 1731 0026 2046     		mov	r0, r4
 1732 0028 FFF7FEFF 		bl	VL53L0X_ClearInterruptMask
 1733              	.LVL259:
 1734 002c 0346     		mov	r3, r0
 1735              	.LVL260:
 1736 002e F1E7     		b	.L159
 1737              	.L164:
1082:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START, 0x00);
 1738              		.loc 1 1082 0
 1739 0030 0022     		movs	r2, #0
 1740 0032 1146     		mov	r1, r2
 1741 0034 2046     		mov	r0, r4
 1742 0036 FFF7FEFF 		bl	VL53L0X_WrByte
 1743              	.LVL261:
 1744 003a 0346     		mov	r3, r0
 1745              	.LVL262:
 1746 003c EBE7     		b	.L160
 1747              		.cfi_endproc
 1748              	.LFE142:
 1750              		.section	.text.VL53L0X_ref_calibration_io,"ax",%progbits
 1751              		.align	1
 1752              		.global	VL53L0X_ref_calibration_io
 1753              		.syntax unified
 1754              		.thumb
 1755              		.thumb_func
 1756              		.fpu fpv4-sp-d16
 1758              	VL53L0X_ref_calibration_io:
 1759              	.LFB143:
1086:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1087:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1088:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_ref_calibration_io(VL53L0X_DEV Dev, uint8_t read_not_write,
1089:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings, uint8_t PhaseCal,
1090:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal,
1091:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	const uint8_t vhv_enable, const uint8_t phase_enable)
1092:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1760              		.loc 1 1092 0
 1761              		.cfi_startproc
 1762              		@ args = 16, pretend = 0, frame = 8
 1763              		@ frame_needed = 0, uses_anonymous_args = 0
 1764              	.LVL263:
 1765 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
ARM GAS  /tmp/cc2MNkxp.s 			page 53


 1766              	.LCFI38:
 1767              		.cfi_def_cfa_offset 36
 1768              		.cfi_offset 4, -36
 1769              		.cfi_offset 5, -32
 1770              		.cfi_offset 6, -28
 1771              		.cfi_offset 7, -24
 1772              		.cfi_offset 8, -20
 1773              		.cfi_offset 9, -16
 1774              		.cfi_offset 10, -12
 1775              		.cfi_offset 11, -8
 1776              		.cfi_offset 14, -4
 1777 0004 83B0     		sub	sp, sp, #12
 1778              	.LCFI39:
 1779              		.cfi_def_cfa_offset 48
 1780 0006 0546     		mov	r5, r0
 1781 0008 8846     		mov	r8, r1
 1782 000a 9246     		mov	r10, r2
 1783 000c 9946     		mov	r9, r3
 1784 000e 9DF83870 		ldrb	r7, [sp, #56]	@ zero_extendqisi2
 1785 0012 9DF83C60 		ldrb	r6, [sp, #60]	@ zero_extendqisi2
 1786              	.LVL264:
1093:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1094:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalint = 0;
 1787              		.loc 1 1094 0
 1788 0016 4FF0000B 		mov	fp, #0
 1789 001a 8DF807B0 		strb	fp, [sp, #7]
1095:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1096:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1097:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1790              		.loc 1 1097 0
 1791 001e 0122     		movs	r2, #1
 1792              	.LVL265:
 1793 0020 FF21     		movs	r1, #255
 1794              	.LVL266:
 1795 0022 FFF7FEFF 		bl	VL53L0X_WrByte
 1796              	.LVL267:
 1797 0026 0446     		mov	r4, r0
 1798              	.LVL268:
1098:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x00);
 1799              		.loc 1 1098 0
 1800 0028 5A46     		mov	r2, fp
 1801 002a 5946     		mov	r1, fp
 1802 002c 2846     		mov	r0, r5
 1803 002e FFF7FEFF 		bl	VL53L0X_WrByte
 1804              	.LVL269:
 1805 0032 0443     		orrs	r4, r4, r0
 1806              	.LVL270:
 1807 0034 64B2     		sxtb	r4, r4
 1808              	.LVL271:
1099:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1809              		.loc 1 1099 0
 1810 0036 5A46     		mov	r2, fp
 1811 0038 FF21     		movs	r1, #255
 1812 003a 2846     		mov	r0, r5
 1813 003c FFF7FEFF 		bl	VL53L0X_WrByte
 1814              	.LVL272:
 1815 0040 0443     		orrs	r4, r4, r0
ARM GAS  /tmp/cc2MNkxp.s 			page 54


 1816              	.LVL273:
 1817 0042 64B2     		sxtb	r4, r4
 1818              	.LVL274:
1100:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1101:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (read_not_write) {
 1819              		.loc 1 1101 0
 1820 0044 B8F1000F 		cmp	r8, #0
 1821 0048 30D0     		beq	.L166
1102:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 1822              		.loc 1 1102 0
 1823 004a F7B9     		cbnz	r7, .L171
 1824              	.L167:
1103:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xCB, pVhvSettings);
1104:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (phase_enable)
 1825              		.loc 1 1104 0
 1826 004c 2EBB     		cbnz	r6, .L172
 1827              	.L168:
1105:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xEE, &PhaseCalint);
1106:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	} else {
1107:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (vhv_enable)
1108:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
1109:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (phase_enable)
1110:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
1111:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
1112:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1113:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1828              		.loc 1 1113 0
 1829 004e 0122     		movs	r2, #1
 1830 0050 FF21     		movs	r1, #255
 1831 0052 2846     		mov	r0, r5
 1832 0054 FFF7FEFF 		bl	VL53L0X_WrByte
 1833              	.LVL275:
 1834 0058 0443     		orrs	r4, r4, r0
 1835              	.LVL276:
 1836 005a 64B2     		sxtb	r4, r4
 1837              	.LVL277:
1114:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x01);
 1838              		.loc 1 1114 0
 1839 005c 0122     		movs	r2, #1
 1840 005e 0021     		movs	r1, #0
 1841 0060 2846     		mov	r0, r5
 1842 0062 FFF7FEFF 		bl	VL53L0X_WrByte
 1843              	.LVL278:
 1844 0066 0443     		orrs	r4, r4, r0
 1845              	.LVL279:
 1846 0068 64B2     		sxtb	r4, r4
 1847              	.LVL280:
1115:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1848              		.loc 1 1115 0
 1849 006a 0022     		movs	r2, #0
 1850 006c FF21     		movs	r1, #255
 1851 006e 2846     		mov	r0, r5
 1852 0070 FFF7FEFF 		bl	VL53L0X_WrByte
 1853              	.LVL281:
 1854 0074 2043     		orrs	r0, r0, r4
 1855              	.LVL282:
1116:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/cc2MNkxp.s 			page 55


1117:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	*pPhaseCal = (uint8_t)(PhaseCalint&0xEF);
 1856              		.loc 1 1117 0
 1857 0076 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1858 007a 03F0EF03 		and	r3, r3, #239
 1859 007e 0D9A     		ldr	r2, [sp, #52]
 1860 0080 1370     		strb	r3, [r2]
1118:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1119:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1120:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 1861              		.loc 1 1120 0
 1862 0082 40B2     		sxtb	r0, r0
 1863 0084 03B0     		add	sp, sp, #12
 1864              	.LCFI40:
 1865              		.cfi_remember_state
 1866              		.cfi_def_cfa_offset 36
 1867              		@ sp needed
 1868 0086 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1869              	.LVL283:
 1870              	.L171:
 1871              	.LCFI41:
 1872              		.cfi_restore_state
1103:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (phase_enable)
 1873              		.loc 1 1103 0
 1874 008a 0C9A     		ldr	r2, [sp, #48]
 1875 008c CB21     		movs	r1, #203
 1876 008e 2846     		mov	r0, r5
 1877 0090 FFF7FEFF 		bl	VL53L0X_RdByte
 1878              	.LVL284:
 1879 0094 0443     		orrs	r4, r4, r0
 1880              	.LVL285:
 1881 0096 64B2     		sxtb	r4, r4
 1882              	.LVL286:
 1883 0098 D8E7     		b	.L167
 1884              	.L172:
1105:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	} else {
 1885              		.loc 1 1105 0
 1886 009a 0DF10702 		add	r2, sp, #7
 1887 009e EE21     		movs	r1, #238
 1888 00a0 2846     		mov	r0, r5
 1889 00a2 FFF7FEFF 		bl	VL53L0X_RdByte
 1890              	.LVL287:
 1891 00a6 0443     		orrs	r4, r4, r0
 1892              	.LVL288:
 1893 00a8 64B2     		sxtb	r4, r4
 1894              	.LVL289:
 1895 00aa D0E7     		b	.L168
 1896              	.L166:
1107:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
 1897              		.loc 1 1107 0
 1898 00ac 57B9     		cbnz	r7, .L173
 1899              	.L169:
1109:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
 1900              		.loc 1 1109 0
 1901 00ae 002E     		cmp	r6, #0
 1902 00b0 CDD0     		beq	.L168
1110:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
 1903              		.loc 1 1110 0
ARM GAS  /tmp/cc2MNkxp.s 			page 56


 1904 00b2 4B46     		mov	r3, r9
 1905 00b4 8022     		movs	r2, #128
 1906 00b6 EE21     		movs	r1, #238
 1907 00b8 2846     		mov	r0, r5
 1908 00ba FFF7FEFF 		bl	VL53L0X_UpdateByte
 1909              	.LVL290:
 1910 00be 0443     		orrs	r4, r4, r0
 1911              	.LVL291:
 1912 00c0 64B2     		sxtb	r4, r4
 1913              	.LVL292:
 1914 00c2 C4E7     		b	.L168
 1915              	.L173:
1108:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (phase_enable)
 1916              		.loc 1 1108 0
 1917 00c4 5246     		mov	r2, r10
 1918 00c6 CB21     		movs	r1, #203
 1919 00c8 2846     		mov	r0, r5
 1920 00ca FFF7FEFF 		bl	VL53L0X_WrByte
 1921              	.LVL293:
 1922 00ce 0443     		orrs	r4, r4, r0
 1923              	.LVL294:
 1924 00d0 64B2     		sxtb	r4, r4
 1925              	.LVL295:
 1926 00d2 ECE7     		b	.L169
 1927              		.cfi_endproc
 1928              	.LFE143:
 1930              		.section	.text.VL53L0X_perform_vhv_calibration,"ax",%progbits
 1931              		.align	1
 1932              		.global	VL53L0X_perform_vhv_calibration
 1933              		.syntax unified
 1934              		.thumb
 1935              		.thumb_func
 1936              		.fpu fpv4-sp-d16
 1938              	VL53L0X_perform_vhv_calibration:
 1939              	.LFB144:
1121:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1122:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1123:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_vhv_calibration(VL53L0X_DEV Dev,
1124:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, const uint8_t get_data_enable,
1125:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1126:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 1940              		.loc 1 1126 0
 1941              		.cfi_startproc
 1942              		@ args = 0, pretend = 0, frame = 8
 1943              		@ frame_needed = 0, uses_anonymous_args = 0
 1944              	.LVL296:
 1945 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1946              	.LCFI42:
 1947              		.cfi_def_cfa_offset 24
 1948              		.cfi_offset 4, -24
 1949              		.cfi_offset 5, -20
 1950              		.cfi_offset 6, -16
 1951              		.cfi_offset 7, -12
 1952              		.cfi_offset 8, -8
 1953              		.cfi_offset 14, -4
 1954 0004 86B0     		sub	sp, sp, #24
 1955              	.LCFI43:
ARM GAS  /tmp/cc2MNkxp.s 			page 57


 1956              		.cfi_def_cfa_offset 48
 1957 0006 0446     		mov	r4, r0
 1958 0008 0D46     		mov	r5, r1
 1959 000a 1746     		mov	r7, r2
 1960              	.LVL297:
1127:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1128:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1129:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1130:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1131:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalInt = 0;
 1961              		.loc 1 1131 0
 1962 000c 0022     		movs	r2, #0
 1963              	.LVL298:
 1964 000e 8DF81720 		strb	r2, [sp, #23]
1132:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1133:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1134:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1135:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
1136:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1137:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (restore_config)
 1965              		.loc 1 1137 0
 1966 0012 1E46     		mov	r6, r3
 1967 0014 9BB1     		cbz	r3, .L180
1138:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1968              		.loc 1 1138 0
 1969 0016 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 1970              	.LVL299:
 1971              	.L175:
1139:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1140:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Run VHV */
1141:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x01);
 1972              		.loc 1 1141 0
 1973 001a 0122     		movs	r2, #1
 1974 001c 1146     		mov	r1, r2
 1975              	.LVL300:
 1976 001e 2046     		mov	r0, r4
 1977              	.LVL301:
 1978 0020 FFF7FEFF 		bl	VL53L0X_WrByte
 1979              	.LVL302:
1142:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1143:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1980              		.loc 1 1143 0
 1981 0024 0346     		mov	r3, r0
 1982 0026 68B1     		cbz	r0, .L182
 1983              	.LVL303:
 1984              	.L176:
1144:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x40);
1145:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1146:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1147:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 1985              		.loc 1 1147 0
 1986 0028 0BB9     		cbnz	r3, .L177
 1987              		.loc 1 1147 0 is_stmt 0 discriminator 1
 1988 002a 012F     		cmp	r7, #1
 1989 002c 10D0     		beq	.L183
 1990              	.L177:
1148:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
ARM GAS  /tmp/cc2MNkxp.s 			page 58


1149:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1150:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			pVhvSettings, &PhaseCalInt,
1151:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			1, 0);
1152:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	} else
1153:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*pVhvSettings = 0;
 1991              		.loc 1 1153 0 is_stmt 1
 1992 002e 0022     		movs	r2, #0
 1993 0030 2A70     		strb	r2, [r5]
 1994              	.L178:
1154:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1155:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1156:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 1995              		.loc 1 1156 0
 1996 0032 03B9     		cbnz	r3, .L179
 1997              		.loc 1 1156 0 is_stmt 0 discriminator 1
 1998 0034 D6B9     		cbnz	r6, .L184
 1999              	.LVL304:
 2000              	.L179:
1157:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1158:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
1159:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
1160:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
1161:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
1162:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1163:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
1164:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1165:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1166:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 2001              		.loc 1 1166 0 is_stmt 1
 2002 0036 1846     		mov	r0, r3
 2003 0038 06B0     		add	sp, sp, #24
 2004              	.LCFI44:
 2005              		.cfi_remember_state
 2006              		.cfi_def_cfa_offset 24
 2007              		@ sp needed
 2008 003a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2009              	.LVL305:
 2010              	.L180:
 2011              	.LCFI45:
 2012              		.cfi_restore_state
1128:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2013              		.loc 1 1128 0
 2014 003e 4FF00008 		mov	r8, #0
 2015 0042 EAE7     		b	.L175
 2016              	.LVL306:
 2017              	.L182:
1144:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2018              		.loc 1 1144 0
 2019 0044 4021     		movs	r1, #64
 2020 0046 2046     		mov	r0, r4
 2021              	.LVL307:
 2022 0048 FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 2023              	.LVL308:
 2024 004c 0346     		mov	r3, r0
 2025              	.LVL309:
 2026 004e EBE7     		b	.L176
 2027              	.L183:
ARM GAS  /tmp/cc2MNkxp.s 			page 59


1148:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2028              		.loc 1 1148 0
 2029 0050 0022     		movs	r2, #0
 2030 0052 0392     		str	r2, [sp, #12]
 2031 0054 0121     		movs	r1, #1
 2032 0056 0291     		str	r1, [sp, #8]
 2033 0058 0DF11703 		add	r3, sp, #23
 2034              	.LVL310:
 2035 005c 0193     		str	r3, [sp, #4]
 2036 005e 0095     		str	r5, [sp]
 2037 0060 1346     		mov	r3, r2
 2038 0062 2046     		mov	r0, r4
 2039 0064 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2040              	.LVL311:
 2041 0068 0346     		mov	r3, r0
 2042              	.LVL312:
 2043 006a E2E7     		b	.L178
 2044              	.L184:
1158:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2045              		.loc 1 1158 0
 2046 006c 4246     		mov	r2, r8
 2047 006e 0121     		movs	r1, #1
 2048 0070 2046     		mov	r0, r4
 2049 0072 FFF7FEFF 		bl	VL53L0X_WrByte
 2050              	.LVL313:
1160:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2051              		.loc 1 1160 0
 2052 0076 0346     		mov	r3, r0
 2053 0078 0028     		cmp	r0, #0
 2054 007a DCD1     		bne	.L179
1161:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2055              		.loc 1 1161 0
 2056 007c 84F83081 		strb	r8, [r4, #304]
 2057 0080 D9E7     		b	.L179
 2058              		.cfi_endproc
 2059              	.LFE144:
 2061              		.section	.text.VL53L0X_perform_phase_calibration,"ax",%progbits
 2062              		.align	1
 2063              		.global	VL53L0X_perform_phase_calibration
 2064              		.syntax unified
 2065              		.thumb
 2066              		.thumb_func
 2067              		.fpu fpv4-sp-d16
 2069              	VL53L0X_perform_phase_calibration:
 2070              	.LFB145:
1167:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1168:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_phase_calibration(VL53L0X_DEV Dev,
1169:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t *pPhaseCal, const uint8_t get_data_enable,
1170:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1171:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 2071              		.loc 1 1171 0
 2072              		.cfi_startproc
 2073              		@ args = 0, pretend = 0, frame = 8
 2074              		@ frame_needed = 0, uses_anonymous_args = 0
 2075              	.LVL314:
 2076 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2077              	.LCFI46:
ARM GAS  /tmp/cc2MNkxp.s 			page 60


 2078              		.cfi_def_cfa_offset 24
 2079              		.cfi_offset 4, -24
 2080              		.cfi_offset 5, -20
 2081              		.cfi_offset 6, -16
 2082              		.cfi_offset 7, -12
 2083              		.cfi_offset 8, -8
 2084              		.cfi_offset 14, -4
 2085 0004 86B0     		sub	sp, sp, #24
 2086              	.LCFI47:
 2087              		.cfi_def_cfa_offset 48
 2088 0006 0446     		mov	r4, r0
 2089 0008 0D46     		mov	r5, r1
 2090 000a 1746     		mov	r7, r2
 2091              	.LVL315:
1172:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1173:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1174:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1175:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1176:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettingsint;
1177:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1178:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1179:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1180:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
1181:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1182:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (restore_config)
 2092              		.loc 1 1182 0
 2093 000c 1E46     		mov	r6, r3
 2094 000e 9BB1     		cbz	r3, .L191
1183:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 2095              		.loc 1 1183 0
 2096 0010 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 2097              	.LVL316:
 2098              	.L186:
1184:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1185:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Run PhaseCal */
1186:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x02);
 2099              		.loc 1 1186 0
 2100 0014 0222     		movs	r2, #2
 2101              	.LVL317:
 2102 0016 0121     		movs	r1, #1
 2103              	.LVL318:
 2104 0018 2046     		mov	r0, r4
 2105              	.LVL319:
 2106 001a FFF7FEFF 		bl	VL53L0X_WrByte
 2107              	.LVL320:
1187:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1188:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2108              		.loc 1 1188 0
 2109 001e 0346     		mov	r3, r0
 2110 0020 68B1     		cbz	r0, .L193
 2111              	.LVL321:
 2112              	.L187:
1189:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x0);
1190:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1191:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* Read PhaseCal from device */
1192:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 2113              		.loc 1 1192 0
ARM GAS  /tmp/cc2MNkxp.s 			page 61


 2114 0022 0BB9     		cbnz	r3, .L188
 2115              		.loc 1 1192 0 is_stmt 0 discriminator 1
 2116 0024 012F     		cmp	r7, #1
 2117 0026 10D0     		beq	.L194
 2118              	.L188:
1193:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
1194:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1195:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			&VhvSettingsint, pPhaseCal,
1196:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			0, 1);
1197:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	} else
1198:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*pPhaseCal = 0;
 2119              		.loc 1 1198 0 is_stmt 1
 2120 0028 0022     		movs	r2, #0
 2121 002a 2A70     		strb	r2, [r5]
 2122              	.L189:
1199:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1200:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1201:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 2123              		.loc 1 1201 0
 2124 002c 03B9     		cbnz	r3, .L190
 2125              		.loc 1 1201 0 is_stmt 0 discriminator 1
 2126 002e D6B9     		cbnz	r6, .L195
 2127              	.LVL322:
 2128              	.L190:
1202:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1203:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
1204:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
1205:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
1206:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
1207:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1208:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
1209:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1210:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1211:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 2129              		.loc 1 1211 0 is_stmt 1
 2130 0030 1846     		mov	r0, r3
 2131 0032 06B0     		add	sp, sp, #24
 2132              	.LCFI48:
 2133              		.cfi_remember_state
 2134              		.cfi_def_cfa_offset 24
 2135              		@ sp needed
 2136 0034 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2137              	.LVL323:
 2138              	.L191:
 2139              	.LCFI49:
 2140              		.cfi_restore_state
1173:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2141              		.loc 1 1173 0
 2142 0038 4FF00008 		mov	r8, #0
 2143 003c EAE7     		b	.L186
 2144              	.LVL324:
 2145              	.L193:
1189:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2146              		.loc 1 1189 0
 2147 003e 0021     		movs	r1, #0
 2148 0040 2046     		mov	r0, r4
 2149              	.LVL325:
ARM GAS  /tmp/cc2MNkxp.s 			page 62


 2150 0042 FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 2151              	.LVL326:
 2152 0046 0346     		mov	r3, r0
 2153              	.LVL327:
 2154 0048 EBE7     		b	.L187
 2155              	.L194:
1193:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2156              		.loc 1 1193 0
 2157 004a 0121     		movs	r1, #1
 2158 004c 0391     		str	r1, [sp, #12]
 2159 004e 0022     		movs	r2, #0
 2160 0050 0292     		str	r2, [sp, #8]
 2161 0052 0195     		str	r5, [sp, #4]
 2162 0054 0DF11703 		add	r3, sp, #23
 2163              	.LVL328:
 2164 0058 0093     		str	r3, [sp]
 2165 005a 1346     		mov	r3, r2
 2166 005c 2046     		mov	r0, r4
 2167 005e FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2168              	.LVL329:
 2169 0062 0346     		mov	r3, r0
 2170              	.LVL330:
 2171 0064 E2E7     		b	.L189
 2172              	.L195:
1203:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2173              		.loc 1 1203 0
 2174 0066 4246     		mov	r2, r8
 2175 0068 0121     		movs	r1, #1
 2176 006a 2046     		mov	r0, r4
 2177 006c FFF7FEFF 		bl	VL53L0X_WrByte
 2178              	.LVL331:
1205:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2179              		.loc 1 1205 0
 2180 0070 0346     		mov	r3, r0
 2181 0072 0028     		cmp	r0, #0
 2182 0074 DCD1     		bne	.L190
1206:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2183              		.loc 1 1206 0
 2184 0076 84F83081 		strb	r8, [r4, #304]
 2185 007a D9E7     		b	.L190
 2186              		.cfi_endproc
 2187              	.LFE145:
 2189              		.section	.text.VL53L0X_perform_ref_calibration,"ax",%progbits
 2190              		.align	1
 2191              		.global	VL53L0X_perform_ref_calibration
 2192              		.syntax unified
 2193              		.thumb
 2194              		.thumb_func
 2195              		.fpu fpv4-sp-d16
 2197              	VL53L0X_perform_ref_calibration:
 2198              	.LFB146:
1212:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1213:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_calibration(VL53L0X_DEV Dev,
1214:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal, uint8_t get_data_enable)
1215:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 2199              		.loc 1 1215 0
 2200              		.cfi_startproc
ARM GAS  /tmp/cc2MNkxp.s 			page 63


 2201              		@ args = 0, pretend = 0, frame = 0
 2202              		@ frame_needed = 0, uses_anonymous_args = 0
 2203              	.LVL332:
 2204 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2205              	.LCFI50:
 2206              		.cfi_def_cfa_offset 24
 2207              		.cfi_offset 3, -24
 2208              		.cfi_offset 4, -20
 2209              		.cfi_offset 5, -16
 2210              		.cfi_offset 6, -12
 2211              		.cfi_offset 7, -8
 2212              		.cfi_offset 14, -4
 2213 0002 0446     		mov	r4, r0
 2214 0004 1746     		mov	r7, r2
 2215 0006 1D46     		mov	r5, r3
 2216              	.LVL333:
1216:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1217:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
1218:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1219:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1220:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1221:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 */
1222:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1223:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 2217              		.loc 1 1223 0
 2218 0008 90F83061 		ldrb	r6, [r0, #304]	@ zero_extendqisi2
 2219              	.LVL334:
1224:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1225:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	/* In the following function we don't save the config to optimize
1226:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	 * writes on device. Config is saved and restored only once. */
1227:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_perform_vhv_calibration(
 2220              		.loc 1 1227 0
 2221 000c 0023     		movs	r3, #0
 2222              	.LVL335:
 2223 000e 2A46     		mov	r2, r5
 2224              	.LVL336:
 2225 0010 FFF7FEFF 		bl	VL53L0X_perform_vhv_calibration
 2226              	.LVL337:
1228:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Dev, pVhvSettings, get_data_enable, 0);
1229:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1230:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1231:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2227              		.loc 1 1231 0
 2228 0014 0346     		mov	r3, r0
 2229 0016 10B1     		cbz	r0, .L200
 2230              	.LVL338:
 2231              	.L197:
1232:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
1233:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			Dev, pPhaseCal, get_data_enable, 0);
1234:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1235:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1236:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 2232              		.loc 1 1236 0
 2233 0018 4BB1     		cbz	r3, .L201
 2234              	.LVL339:
 2235              	.L198:
1237:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
ARM GAS  /tmp/cc2MNkxp.s 			page 64


1238:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
1239:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
1240:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
1241:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
1242:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1243:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	}
1244:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1245:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1246:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 2236              		.loc 1 1246 0
 2237 001a 1846     		mov	r0, r3
 2238 001c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2239              	.LVL340:
 2240              	.L200:
1232:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 2241              		.loc 1 1232 0
 2242 001e 0023     		movs	r3, #0
 2243 0020 2A46     		mov	r2, r5
 2244 0022 3946     		mov	r1, r7
 2245 0024 2046     		mov	r0, r4
 2246              	.LVL341:
 2247 0026 FFF7FEFF 		bl	VL53L0X_perform_phase_calibration
 2248              	.LVL342:
 2249 002a 0346     		mov	r3, r0
 2250              	.LVL343:
 2251 002c F4E7     		b	.L197
 2252              	.L201:
1238:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2253              		.loc 1 1238 0
 2254 002e 3246     		mov	r2, r6
 2255 0030 0121     		movs	r1, #1
 2256 0032 2046     		mov	r0, r4
 2257 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 2258              	.LVL344:
1240:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2259              		.loc 1 1240 0
 2260 0038 0346     		mov	r3, r0
 2261 003a 0028     		cmp	r0, #0
 2262 003c EDD1     		bne	.L198
1241:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2263              		.loc 1 1241 0
 2264 003e 84F83061 		strb	r6, [r4, #304]
 2265 0042 EAE7     		b	.L198
 2266              		.cfi_endproc
 2267              	.LFE146:
 2269              		.section	.text.VL53L0X_perform_ref_spad_management,"ax",%progbits
 2270              		.align	1
 2271              		.global	VL53L0X_perform_ref_spad_management
 2272              		.syntax unified
 2273              		.thumb
 2274              		.thumb_func
 2275              		.fpu fpv4-sp-d16
 2277              	VL53L0X_perform_ref_spad_management:
 2278              	.LFB139:
 679:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2279              		.loc 1 679 0
 2280              		.cfi_startproc
ARM GAS  /tmp/cc2MNkxp.s 			page 65


 2281              		@ args = 0, pretend = 0, frame = 56
 2282              		@ frame_needed = 0, uses_anonymous_args = 0
 2283              	.LVL345:
 2284 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2285              	.LCFI51:
 2286              		.cfi_def_cfa_offset 36
 2287              		.cfi_offset 4, -36
 2288              		.cfi_offset 5, -32
 2289              		.cfi_offset 6, -28
 2290              		.cfi_offset 7, -24
 2291              		.cfi_offset 8, -20
 2292              		.cfi_offset 9, -16
 2293              		.cfi_offset 10, -12
 2294              		.cfi_offset 11, -8
 2295              		.cfi_offset 14, -4
 2296 0004 95B0     		sub	sp, sp, #84
 2297              	.LCFI52:
 2298              		.cfi_def_cfa_offset 120
 2299 0006 0446     		mov	r4, r0
 2300 0008 0C91     		str	r1, [sp, #48]
 2301 000a 0D92     		str	r2, [sp, #52]
 2302              	.LVL346:
 686:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 2303              		.loc 1 686 0
 2304 000c 0023     		movs	r3, #0
 2305 000e 1193     		str	r3, [sp, #68]
 687:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 2306              		.loc 1 687 0
 2307 0010 1093     		str	r3, [sp, #64]
 2308              	.LVL347:
 696:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2309              		.loc 1 696 0
 2310 0012 8DF83D30 		strb	r3, [sp, #61]
 697:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 2311              		.loc 1 697 0
 2312 0016 8DF83C30 		strb	r3, [sp, #60]
 2313              	.LVL348:
 724:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2314              		.loc 1 724 0
 2315 001a B0F83CA1 		ldrh	r10, [r0, #316]
 2316              	.LVL349:
 734:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2317              		.loc 1 734 0
 2318 001e 04E0     		b	.L203
 2319              	.LVL350:
 2320              	.L204:
 735:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2321              		.loc 1 735 0 discriminator 3
 2322 0020 E218     		adds	r2, r4, r3
 2323 0022 0021     		movs	r1, #0
 2324 0024 82F82411 		strb	r1, [r2, #292]
 734:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2325              		.loc 1 734 0 discriminator 3
 2326 0028 0133     		adds	r3, r3, #1
 2327              	.LVL351:
 2328              	.L203:
 734:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
ARM GAS  /tmp/cc2MNkxp.s 			page 66


 2329              		.loc 1 734 0 is_stmt 0 discriminator 1
 2330 002a 052B     		cmp	r3, #5
 2331 002c F8D9     		bls	.L204
 738:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2332              		.loc 1 738 0 is_stmt 1
 2333 002e 0122     		movs	r2, #1
 2334 0030 FF21     		movs	r1, #255
 2335 0032 2046     		mov	r0, r4
 2336              	.LVL352:
 2337 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 2338              	.LVL353:
 740:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2339              		.loc 1 740 0
 2340 0038 0546     		mov	r5, r0
 2341 003a 0028     		cmp	r0, #0
 2342 003c 32D0     		beq	.L237
 2343              	.LVL354:
 2344              	.L205:
 744:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2345              		.loc 1 744 0
 2346 003e 002D     		cmp	r5, #0
 2347 0040 37D0     		beq	.L238
 2348              	.L206:
 748:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2349              		.loc 1 748 0
 2350 0042 002D     		cmp	r5, #0
 2351 0044 3CD0     		beq	.L239
 2352              	.L207:
 751:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2353              		.loc 1 751 0
 2354 0046 002D     		cmp	r5, #0
 2355 0048 41D0     		beq	.L240
 2356              	.L208:
 757:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2357              		.loc 1 757 0
 2358 004a 002D     		cmp	r5, #0
 2359 004c 46D0     		beq	.L241
 2360              	.L209:
 762:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 2361              		.loc 1 762 0
 2362 004e 002D     		cmp	r5, #0
 2363 0050 4BD0     		beq	.L242
 2364              	.L210:
 766:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 2365              		.loc 1 766 0
 2366 0052 002D     		cmp	r5, #0
 2367 0054 52D0     		beq	.L243
 2368              	.L211:
 782:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 2369              		.loc 1 782 0
 2370 0056 002D     		cmp	r5, #0
 2371 0058 65D0     		beq	.L244
 699:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2372              		.loc 1 699 0
 2373 005a 0023     		movs	r3, #0
 2374 005c 1F46     		mov	r7, r3
 2375 005e 0A93     		str	r3, [sp, #40]
ARM GAS  /tmp/cc2MNkxp.s 			page 67


 698:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2376              		.loc 1 698 0
 2377 0060 9846     		mov	r8, r3
 2378 0062 0893     		str	r3, [sp, #32]
 2379              	.LVL355:
 2380              	.L212:
 836:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2381              		.loc 1 836 0
 2382 0064 002D     		cmp	r5, #0
 2383 0066 40F01A81 		bne	.L218
 837:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 2384              		.loc 1 837 0 discriminator 1
 2385 006a BDF83E30 		ldrh	r3, [sp, #62]
 836:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2386              		.loc 1 836 0 discriminator 1
 2387 006e 5345     		cmp	r3, r10
 2388 0070 80F01581 		bcs	.L218
 843:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 2389              		.loc 1 843 0
 2390 0074 9DF82020 		ldrb	r2, [sp, #32]	@ zero_extendqisi2
 2391 0078 0A92     		str	r2, [sp, #40]
 2392              	.LVL356:
 846:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				spadArraySize);
 2393              		.loc 1 846 0
 2394 007a D4F82401 		ldr	r0, [r4, #292]	@ unaligned
 2395 007e 1290     		str	r0, [sp, #72]
 2396 0080 B4F82821 		ldrh	r2, [r4, #296]	@ unaligned
 2397 0084 ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 848:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			targetRefRate);
 2398              		.loc 1 848 0
 2399 0088 CDF824A0 		str	r10, [sp, #36]
 2400 008c A3EB0A03 		sub	r3, r3, r10
 2401 0090 002B     		cmp	r3, #0
 2402 0092 B8BF     		it	lt
 2403 0094 5B42     		rsblt	r3, r3, #0
 2404 0096 0B93     		str	r3, [sp, #44]
 2405              	.LVL357:
 844:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2406              		.loc 1 844 0
 2407 0098 4FF00308 		mov	r8, #3
 850:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2408              		.loc 1 850 0
 2409 009c 4FF0000B 		mov	fp, #0
 2410 00a0 0797     		str	r7, [sp, #28]
 852:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2411              		.loc 1 852 0
 2412 00a2 C1E0     		b	.L219
 2413              	.LVL358:
 2414              	.L237:
 741:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 2415              		.loc 1 741 0
 2416 00a4 0022     		movs	r2, #0
 2417 00a6 4F21     		movs	r1, #79
 2418 00a8 2046     		mov	r0, r4
 2419              	.LVL359:
 2420 00aa FFF7FEFF 		bl	VL53L0X_WrByte
 2421              	.LVL360:
ARM GAS  /tmp/cc2MNkxp.s 			page 68


 2422 00ae 0546     		mov	r5, r0
 2423              	.LVL361:
 2424 00b0 C5E7     		b	.L205
 2425              	.L238:
 745:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 2426              		.loc 1 745 0
 2427 00b2 2C22     		movs	r2, #44
 2428 00b4 4E21     		movs	r1, #78
 2429 00b6 2046     		mov	r0, r4
 2430 00b8 FFF7FEFF 		bl	VL53L0X_WrByte
 2431              	.LVL362:
 2432 00bc 0546     		mov	r5, r0
 2433              	.LVL363:
 2434 00be C0E7     		b	.L206
 2435              	.L239:
 749:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2436              		.loc 1 749 0
 2437 00c0 0022     		movs	r2, #0
 2438 00c2 FF21     		movs	r1, #255
 2439 00c4 2046     		mov	r0, r4
 2440 00c6 FFF7FEFF 		bl	VL53L0X_WrByte
 2441              	.LVL364:
 2442 00ca 0546     		mov	r5, r0
 2443              	.LVL365:
 2444 00cc BBE7     		b	.L207
 2445              	.L240:
 752:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 2446              		.loc 1 752 0
 2447 00ce B422     		movs	r2, #180
 2448 00d0 B621     		movs	r1, #182
 2449 00d2 2046     		mov	r0, r4
 2450 00d4 FFF7FEFF 		bl	VL53L0X_WrByte
 2451              	.LVL366:
 2452 00d8 0546     		mov	r5, r0
 2453              	.LVL367:
 2454 00da B6E7     		b	.L208
 2455              	.L241:
 758:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 2456              		.loc 1 758 0
 2457 00dc 0022     		movs	r2, #0
 2458 00de 8021     		movs	r1, #128
 2459 00e0 2046     		mov	r0, r4
 2460 00e2 FFF7FEFF 		bl	VL53L0X_WrByte
 2461              	.LVL368:
 2462 00e6 0546     		mov	r5, r0
 2463              	.LVL369:
 2464 00e8 B1E7     		b	.L209
 2465              	.L242:
 763:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 2466              		.loc 1 763 0
 2467 00ea 0023     		movs	r3, #0
 2468 00ec 0FAA     		add	r2, sp, #60
 2469 00ee 0DF13D01 		add	r1, sp, #61
 2470 00f2 2046     		mov	r0, r4
 2471 00f4 FFF7FEFF 		bl	VL53L0X_perform_ref_calibration
 2472              	.LVL370:
 2473 00f8 0546     		mov	r5, r0
ARM GAS  /tmp/cc2MNkxp.s 			page 69


 2474              	.LVL371:
 2475 00fa AAE7     		b	.L210
 2476              	.L243:
 769:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 2477              		.loc 1 769 0
 2478 00fc 0021     		movs	r1, #0
 2479 00fe 14AB     		add	r3, sp, #80
 2480 0100 43F80C1D 		str	r1, [r3, #-12]!
 771:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					needAptSpads,
 2481              		.loc 1 771 0
 2482 0104 0493     		str	r3, [sp, #16]
 2483 0106 0323     		movs	r3, #3
 2484 0108 0393     		str	r3, [sp, #12]
 2485 010a 0291     		str	r1, [sp, #8]
 2486 010c B423     		movs	r3, #180
 2487 010e 0193     		str	r3, [sp, #4]
 2488 0110 0623     		movs	r3, #6
 2489 0112 0093     		str	r3, [sp]
 2490 0114 04F59273 		add	r3, r4, #292
 2491 0118 04F59572 		add	r2, r4, #298
 2492 011c 2046     		mov	r0, r4
 2493 011e FFF7FEFF 		bl	enable_ref_spads
 2494              	.LVL372:
 2495 0122 0546     		mov	r5, r0
 2496              	.LVL373:
 2497 0124 97E7     		b	.L211
 2498              	.L244:
 783:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2499              		.loc 1 783 0
 2500 0126 119F     		ldr	r7, [sp, #68]
 2501              	.LVL374:
 785:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 2502              		.loc 1 785 0
 2503 0128 0DF13E01 		add	r1, sp, #62
 2504 012c 2046     		mov	r0, r4
 2505 012e FFF7FEFF 		bl	perform_ref_signal_measurement
 2506              	.LVL375:
 787:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 2507              		.loc 1 787 0
 2508 0132 0546     		mov	r5, r0
 2509 0134 0028     		cmp	r0, #0
 2510 0136 45D1     		bne	.L226
 788:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 2511              		.loc 1 788 0 discriminator 1
 2512 0138 BDF83E30 		ldrh	r3, [sp, #62]
 787:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 2513              		.loc 1 787 0 discriminator 1
 2514 013c 5345     		cmp	r3, r10
 2515 013e 0CD8     		bhi	.L227
 699:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2516              		.loc 1 699 0
 2517 0140 0023     		movs	r3, #0
 2518 0142 0A93     		str	r3, [sp, #40]
 698:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2519              		.loc 1 698 0
 2520 0144 9846     		mov	r8, r3
 832:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
ARM GAS  /tmp/cc2MNkxp.s 			page 70


 2521              		.loc 1 832 0
 2522 0146 0893     		str	r3, [sp, #32]
 2523 0148 8CE7     		b	.L212
 2524              	.LVL376:
 2525              	.L214:
 793:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2526              		.loc 1 793 0 discriminator 3
 2527 014a E218     		adds	r2, r4, r3
 2528 014c 0021     		movs	r1, #0
 2529 014e 82F82411 		strb	r1, [r2, #292]
 792:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2530              		.loc 1 792 0 discriminator 3
 2531 0152 0133     		adds	r3, r3, #1
 2532              	.LVL377:
 2533              	.L213:
 792:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2534              		.loc 1 792 0 is_stmt 0 discriminator 1
 2535 0154 052B     		cmp	r3, #5
 2536 0156 F8D9     		bls	.L214
 2537 0158 02E0     		b	.L215
 2538              	.LVL378:
 2539              	.L227:
 792:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2540              		.loc 1 792 0
 2541 015a 0023     		movs	r3, #0
 2542 015c FAE7     		b	.L213
 2543              	.LVL379:
 2544              	.L217:
 799:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			}
 2545              		.loc 1 799 0 is_stmt 1
 2546 015e 0137     		adds	r7, r7, #1
 2547              	.LVL380:
 2548              	.L215:
 797:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 2549              		.loc 1 797 0
 2550 0160 07F1B400 		add	r0, r7, #180
 2551 0164 FFF7FEFF 		bl	is_aperture
 2552              	.LVL381:
 2553 0168 08B9     		cbnz	r0, .L216
 798:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2554              		.loc 1 798 0
 2555 016a 2B2F     		cmp	r7, #43
 2556 016c F7D9     		bls	.L217
 2557              	.L216:
 2558              	.LVL382:
 804:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					needAptSpads,
 2559              		.loc 1 804 0
 2560 016e 11AB     		add	r3, sp, #68
 2561 0170 0493     		str	r3, [sp, #16]
 2562 0172 0323     		movs	r3, #3
 2563 0174 0393     		str	r3, [sp, #12]
 2564 0176 0297     		str	r7, [sp, #8]
 2565 0178 B423     		movs	r3, #180
 2566 017a 0193     		str	r3, [sp, #4]
 2567 017c 0623     		movs	r3, #6
 2568 017e 0093     		str	r3, [sp]
 2569 0180 04F59273 		add	r3, r4, #292
ARM GAS  /tmp/cc2MNkxp.s 			page 71


 2570 0184 04F59572 		add	r2, r4, #298
 2571 0188 0121     		movs	r1, #1
 2572 018a 2046     		mov	r0, r4
 2573 018c FFF7FEFF 		bl	enable_ref_spads
 2574              	.LVL383:
 814:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 2575              		.loc 1 814 0
 2576 0190 0546     		mov	r5, r0
 2577 0192 28B1     		cbz	r0, .L245
 699:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2578              		.loc 1 699 0
 2579 0194 0023     		movs	r3, #0
 2580 0196 0A93     		str	r3, [sp, #40]
 698:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2581              		.loc 1 698 0
 2582 0198 9846     		mov	r8, r3
 802:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2583              		.loc 1 802 0
 2584 019a 0123     		movs	r3, #1
 2585 019c 0893     		str	r3, [sp, #32]
 2586 019e 61E7     		b	.L212
 2587              	.L245:
 815:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 2588              		.loc 1 815 0
 2589 01a0 119F     		ldr	r7, [sp, #68]
 2590              	.LVL384:
 816:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 2591              		.loc 1 816 0
 2592 01a2 0DF13E01 		add	r1, sp, #62
 2593 01a6 2046     		mov	r0, r4
 2594              	.LVL385:
 2595 01a8 FFF7FEFF 		bl	perform_ref_signal_measurement
 2596              	.LVL386:
 819:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2597              		.loc 1 819 0
 2598 01ac 0546     		mov	r5, r0
 2599 01ae 70B9     		cbnz	r0, .L229
 820:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 2600              		.loc 1 820 0 discriminator 1
 2601 01b0 BDF83E30 		ldrh	r3, [sp, #62]
 819:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2602              		.loc 1 819 0 discriminator 1
 2603 01b4 5345     		cmp	r3, r10
 2604 01b6 10D8     		bhi	.L230
 699:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2605              		.loc 1 699 0
 2606 01b8 0023     		movs	r3, #0
 2607 01ba 0A93     		str	r3, [sp, #40]
 698:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2608              		.loc 1 698 0
 2609 01bc 9846     		mov	r8, r3
 802:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2610              		.loc 1 802 0
 2611 01be 0123     		movs	r3, #1
 2612 01c0 0893     		str	r3, [sp, #32]
 2613 01c2 4FE7     		b	.L212
 2614              	.LVL387:
ARM GAS  /tmp/cc2MNkxp.s 			page 72


 2615              	.L226:
 699:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2616              		.loc 1 699 0
 2617 01c4 0023     		movs	r3, #0
 2618 01c6 0A93     		str	r3, [sp, #40]
 698:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2619              		.loc 1 698 0
 2620 01c8 9846     		mov	r8, r3
 832:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		}
 2621              		.loc 1 832 0
 2622 01ca 0893     		str	r3, [sp, #32]
 2623 01cc 4AE7     		b	.L212
 2624              	.LVL388:
 2625              	.L229:
 699:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2626              		.loc 1 699 0
 2627 01ce 0023     		movs	r3, #0
 2628 01d0 0A93     		str	r3, [sp, #40]
 698:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2629              		.loc 1 698 0
 2630 01d2 9846     		mov	r8, r3
 802:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2631              		.loc 1 802 0
 2632 01d4 0123     		movs	r3, #1
 2633 01d6 0893     		str	r3, [sp, #32]
 2634 01d8 44E7     		b	.L212
 2635              	.L230:
 827:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 2636              		.loc 1 827 0
 2637 01da 0123     		movs	r3, #1
 2638 01dc 0A93     		str	r3, [sp, #40]
 828:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				}
 2639              		.loc 1 828 0
 2640 01de 4FF00308 		mov	r8, #3
 802:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2641              		.loc 1 802 0
 2642 01e2 0893     		str	r3, [sp, #32]
 2643 01e4 3EE7     		b	.L212
 2644              	.LVL389:
 2645              	.L246:
 883:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 2646              		.loc 1 883 0
 2647 01e6 731C     		adds	r3, r6, #1
 2648 01e8 0793     		str	r3, [sp, #28]
 2649              	.LVL390:
 886:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 2650              		.loc 1 886 0
 2651 01ea 4946     		mov	r1, r9
 2652 01ec 2046     		mov	r0, r4
 2653              	.LVL391:
 2654 01ee FFF7FEFF 		bl	set_ref_spad_map
 2655              	.LVL392:
 2656 01f2 0546     		mov	r5, r0
 2657              	.LVL393:
 2658 01f4 3AE0     		b	.L220
 2659              	.LVL394:
 2660              	.L247:
ARM GAS  /tmp/cc2MNkxp.s 			page 73


 909:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 							lastSpadArray);
 2661              		.loc 1 909 0
 2662 01f6 12A9     		add	r1, sp, #72
 2663 01f8 2046     		mov	r0, r4
 2664              	.LVL395:
 2665 01fa FFF7FEFF 		bl	set_ref_spad_map
 2666              	.LVL396:
 2667 01fe 0546     		mov	r5, r0
 2668              	.LVL397:
 911:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2669              		.loc 1 911 0
 2670 0200 1298     		ldr	r0, [sp, #72]
 2671 0202 C4F82401 		str	r0, [r4, #292]	@ unaligned
 2672 0206 BDF84C30 		ldrh	r3, [sp, #76]	@ unaligned
 2673 020a A4F82831 		strh	r3, [r4, #296]	@ unaligned
 2674              	.LVL398:
 915:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				}
 2675              		.loc 1 915 0
 2676 020e 4746     		mov	r7, r8
 917:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			} else {
 2677              		.loc 1 917 0
 2678 0210 4FF0010B 		mov	fp, #1
 2679              	.LVL399:
 2680 0214 07E0     		b	.L222
 2681              	.LVL400:
 2682              	.L221:
 921:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2683              		.loc 1 921 0
 2684 0216 D4F82401 		ldr	r0, [r4, #292]	@ unaligned
 2685              	.LVL401:
 2686 021a 1290     		str	r0, [sp, #72]
 2687 021c B4F82821 		ldrh	r2, [r4, #296]	@ unaligned
 2688 0220 ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 920:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 2689              		.loc 1 920 0
 2690 0224 0B93     		str	r3, [sp, #44]
 2691              	.LVL402:
 2692              	.L222:
 2693 0226 B846     		mov	r8, r7
 2694              	.LVL403:
 2695              	.L219:
 852:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2696              		.loc 1 852 0
 2697 0228 BBF1000F 		cmp	fp, #0
 2698 022c 37D1     		bne	.L218
 853:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 2699              		.loc 1 853 0
 2700 022e 10AB     		add	r3, sp, #64
 2701 0230 079A     		ldr	r2, [sp, #28]
 2702 0232 0621     		movs	r1, #6
 2703 0234 04F59570 		add	r0, r4, #298
 2704 0238 FFF7FEFF 		bl	get_next_good_spad
 2705              	.LVL404:
 858:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 2706              		.loc 1 858 0
 2707 023c 109E     		ldr	r6, [sp, #64]
 2708 023e B6F1FF3F 		cmp	r6, #-1
ARM GAS  /tmp/cc2MNkxp.s 			page 74


 2709 0242 2AD0     		beq	.L231
 866:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					needAptSpads) {
 2710              		.loc 1 866 0
 2711 0244 0796     		str	r6, [sp, #28]
 2712              	.LVL405:
 2713 0246 06F1B400 		add	r0, r6, #180
 2714 024a FFF7FEFF 		bl	is_aperture
 2715              	.LVL406:
 2716 024e 089B     		ldr	r3, [sp, #32]
 2717 0250 9842     		cmp	r0, r3
 2718 0252 24D1     		bne	.L218
 875:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2719              		.loc 1 875 0
 2720 0254 08F10107 		add	r7, r8, #1
 2721              	.LVL407:
 879:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 2722              		.loc 1 879 0
 2723 0258 04F59279 		add	r9, r4, #292
 878:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2724              		.loc 1 878 0
 2725 025c 3246     		mov	r2, r6
 2726 025e 0621     		movs	r1, #6
 2727 0260 4846     		mov	r0, r9
 2728 0262 FFF7FEFF 		bl	enable_spad_bit
 2729              	.LVL408:
 882:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2730              		.loc 1 882 0
 2731 0266 0546     		mov	r5, r0
 2732 0268 0028     		cmp	r0, #0
 2733 026a BCD0     		beq	.L246
 2734              	.LVL409:
 2735              	.L220:
 890:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 2736              		.loc 1 890 0
 2737 026c 5DBB     		cbnz	r5, .L232
 893:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 2738              		.loc 1 893 0
 2739 026e 0DF13E01 		add	r1, sp, #62
 2740 0272 2046     		mov	r0, r4
 2741 0274 FFF7FEFF 		bl	perform_ref_signal_measurement
 2742              	.LVL410:
 896:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 2743              		.loc 1 896 0
 2744 0278 0546     		mov	r5, r0
 2745 027a 30BB     		cbnz	r0, .L233
 899:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2746              		.loc 1 899 0
 2747 027c BDF83E20 		ldrh	r2, [sp, #62]
 2748 0280 099B     		ldr	r3, [sp, #36]
 2749 0282 D31A     		subs	r3, r2, r3
 2750 0284 002B     		cmp	r3, #0
 2751 0286 B8BF     		it	lt
 2752 0288 5B42     		rsblt	r3, r3, #0
 2753              	.LVL411:
 901:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 2754              		.loc 1 901 0
 2755 028a 5245     		cmp	r2, r10
ARM GAS  /tmp/cc2MNkxp.s 			page 75


 2756 028c C3D9     		bls	.L221
 906:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 2757              		.loc 1 906 0
 2758 028e 0B9A     		ldr	r2, [sp, #44]
 2759 0290 9A42     		cmp	r2, r3
 2760 0292 B0D3     		bcc	.L247
 917:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			} else {
 2761              		.loc 1 917 0
 2762 0294 4FF0010B 		mov	fp, #1
 2763              	.LVL412:
 2764 0298 C5E7     		b	.L222
 2765              	.LVL413:
 2766              	.L231:
 859:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 				break;
 2767              		.loc 1 859 0
 2768 029a 6FF03105 		mvn	r5, #49
 2769              	.LVL414:
 2770              	.L218:
 929:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 2771              		.loc 1 929 0
 2772 029e 75B9     		cbnz	r5, .L224
 930:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 2773              		.loc 1 930 0
 2774 02a0 0C9A     		ldr	r2, [sp, #48]
 2775 02a2 C2F80080 		str	r8, [r2]
 931:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2776              		.loc 1 931 0
 2777 02a6 0D99     		ldr	r1, [sp, #52]
 2778 02a8 0A98     		ldr	r0, [sp, #40]
 2779 02aa 0870     		strb	r0, [r1]
 933:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2780              		.loc 1 933 0
 2781 02ac 0123     		movs	r3, #1
 2782 02ae 84F81531 		strb	r3, [r4, #277]
 934:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 2783              		.loc 1 934 0
 2784 02b2 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2785 02b4 84F81331 		strb	r3, [r4, #275]
 936:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 2786              		.loc 1 936 0
 2787 02b8 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 2788 02ba 84F81431 		strb	r3, [r4, #276]
 2789              	.L224:
 941:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
 2790              		.loc 1 941 0
 2791 02be 2846     		mov	r0, r5
 2792 02c0 15B0     		add	sp, sp, #84
 2793              	.LCFI53:
 2794              		.cfi_remember_state
 2795              		.cfi_def_cfa_offset 36
 2796              		@ sp needed
 2797 02c2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2798              	.LVL415:
 2799              	.L232:
 2800              	.LCFI54:
 2801              		.cfi_restore_state
 875:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
ARM GAS  /tmp/cc2MNkxp.s 			page 76


 2802              		.loc 1 875 0
 2803 02c6 B846     		mov	r8, r7
 2804 02c8 E9E7     		b	.L218
 2805              	.LVL416:
 2806              	.L233:
 2807 02ca B846     		mov	r8, r7
 2808 02cc E7E7     		b	.L218
 2809              		.cfi_endproc
 2810              	.LFE139:
 2812              		.section	.text.VL53L0X_set_ref_calibration,"ax",%progbits
 2813              		.align	1
 2814              		.global	VL53L0X_set_ref_calibration
 2815              		.syntax unified
 2816              		.thumb
 2817              		.thumb_func
 2818              		.fpu fpv4-sp-d16
 2820              	VL53L0X_set_ref_calibration:
 2821              	.LFB147:
1247:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1248:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_ref_calibration(VL53L0X_DEV Dev,
1249:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		uint8_t VhvSettings, uint8_t PhaseCal)
1250:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 2822              		.loc 1 1250 0
 2823              		.cfi_startproc
 2824              		@ args = 0, pretend = 0, frame = 8
 2825              		@ frame_needed = 0, uses_anonymous_args = 0
 2826              	.LVL417:
 2827 0000 00B5     		push	{lr}
 2828              	.LCFI55:
 2829              		.cfi_def_cfa_offset 4
 2830              		.cfi_offset 14, -4
 2831 0002 87B0     		sub	sp, sp, #28
 2832              	.LCFI56:
 2833              		.cfi_def_cfa_offset 32
 2834              	.LVL418:
1251:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1252:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t pVhvSettings;
1253:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t pPhaseCal;
1254:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1255:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 0,
 2835              		.loc 1 1255 0
 2836 0004 0123     		movs	r3, #1
 2837 0006 0393     		str	r3, [sp, #12]
 2838 0008 0293     		str	r3, [sp, #8]
 2839 000a 0DF11603 		add	r3, sp, #22
 2840 000e 0193     		str	r3, [sp, #4]
 2841 0010 0DF11703 		add	r3, sp, #23
 2842 0014 0093     		str	r3, [sp]
 2843 0016 1346     		mov	r3, r2
 2844 0018 0A46     		mov	r2, r1
 2845              	.LVL419:
 2846 001a 0021     		movs	r1, #0
 2847              	.LVL420:
 2848 001c FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2849              	.LVL421:
1256:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1257:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		&pVhvSettings, &pPhaseCal,
ARM GAS  /tmp/cc2MNkxp.s 			page 77


1258:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		1, 1);
1259:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1260:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1261:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 2850              		.loc 1 1261 0
 2851 0020 07B0     		add	sp, sp, #28
 2852              	.LCFI57:
 2853              		.cfi_def_cfa_offset 4
 2854              		@ sp needed
 2855 0022 5DF804FB 		ldr	pc, [sp], #4
 2856              		.cfi_endproc
 2857              	.LFE147:
 2859              		.section	.text.VL53L0X_get_ref_calibration,"ax",%progbits
 2860              		.align	1
 2861              		.global	VL53L0X_get_ref_calibration
 2862              		.syntax unified
 2863              		.thumb
 2864              		.thumb_func
 2865              		.fpu fpv4-sp-d16
 2867              	VL53L0X_get_ref_calibration:
 2868              	.LFB148:
1262:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1263:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_ref_calibration(VL53L0X_DEV Dev,
1264:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		uint8_t *pVhvSettings, uint8_t *pPhaseCal)
1265:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** {
 2869              		.loc 1 1265 0
 2870              		.cfi_startproc
 2871              		@ args = 0, pretend = 0, frame = 0
 2872              		@ frame_needed = 0, uses_anonymous_args = 0
 2873              	.LVL422:
 2874 0000 10B5     		push	{r4, lr}
 2875              	.LCFI58:
 2876              		.cfi_def_cfa_offset 8
 2877              		.cfi_offset 4, -8
 2878              		.cfi_offset 14, -4
 2879 0002 84B0     		sub	sp, sp, #16
 2880              	.LCFI59:
 2881              		.cfi_def_cfa_offset 24
 2882              	.LVL423:
1266:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
1267:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
1268:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
1269:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1270:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 1,
 2883              		.loc 1 1270 0
 2884 0004 0124     		movs	r4, #1
 2885 0006 0394     		str	r4, [sp, #12]
 2886 0008 0294     		str	r4, [sp, #8]
 2887 000a 0192     		str	r2, [sp, #4]
 2888 000c 0091     		str	r1, [sp]
 2889 000e 0023     		movs	r3, #0
 2890 0010 1A46     		mov	r2, r3
 2891              	.LVL424:
 2892 0012 2146     		mov	r1, r4
 2893              	.LVL425:
 2894 0014 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2895              	.LVL426:
ARM GAS  /tmp/cc2MNkxp.s 			page 78


1271:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1272:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		pVhvSettings, pPhaseCal,
1273:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 		1, 1);
1274:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 
1275:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** 	return Status;
1276:Drivers/VL53L0X/API/vl53l0x_api_calibration.c **** }
 2896              		.loc 1 1276 0
 2897 0018 04B0     		add	sp, sp, #16
 2898              	.LCFI60:
 2899              		.cfi_def_cfa_offset 8
 2900              		@ sp needed
 2901 001a 10BD     		pop	{r4, pc}
 2902              		.cfi_endproc
 2903              	.LFE148:
 2905              		.global	refArrayQuadrants
 2906              		.section	.data.refArrayQuadrants,"aw",%progbits
 2907              		.align	2
 2908              		.set	.LANCHOR0,. + 0
 2911              	refArrayQuadrants:
 2912 0000 0A000000 		.word	10
 2913 0004 05000000 		.word	5
 2914 0008 00000000 		.word	0
 2915 000c 05000000 		.word	5
 2916              		.text
 2917              	.Letext0:
 2918              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 2919              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 2920              		.file 4 "Drivers/VL53L0X/API/vl53l0x_types.h"
 2921              		.file 5 "Drivers/VL53L0X/API/vl53l0x_device.h"
 2922              		.file 6 "Drivers/VL53L0X/API/vl53l0x_def.h"
 2923              		.file 7 "/usr/arm-none-eabi/include/sys/lock.h"
 2924              		.file 8 "/usr/arm-none-eabi/include/sys/_types.h"
 2925              		.file 9 "/usr/lib/gcc/arm-none-eabi/7.3.0/include/stddef.h"
 2926              		.file 10 "/usr/arm-none-eabi/include/sys/reent.h"
 2927              		.file 11 "Drivers/CMSIS/Include/core_cm4.h"
 2928              		.file 12 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 2929              		.file 13 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 2930              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 2931              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 2932              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 2933              		.file 17 "Drivers/VL53L0X/Platform/vl53l0x_platform.h"
 2934              		.file 18 "/usr/arm-none-eabi/include/stdlib.h"
 2935              		.file 19 "Drivers/VL53L0X/API/vl53l0x_api_core.h"
 2936              		.file 20 "Drivers/VL53L0X/API/vl53l0x_api.h"
ARM GAS  /tmp/cc2MNkxp.s 			page 79


DEFINED SYMBOLS
                            *ABS*:0000000000000000 vl53l0x_api_calibration.c
     /tmp/cc2MNkxp.s:18     .text.VL53L0X_perform_xtalk_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:25     .text.VL53L0X_perform_xtalk_calibration:0000000000000000 VL53L0X_perform_xtalk_calibration
     /tmp/cc2MNkxp.s:267    .text.VL53L0X_perform_offset_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:274    .text.VL53L0X_perform_offset_calibration:0000000000000000 VL53L0X_perform_offset_calibration
     /tmp/cc2MNkxp.s:481    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000000 $t
     /tmp/cc2MNkxp.s:488    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000000 VL53L0X_set_offset_calibration_data_micro_meter
     /tmp/cc2MNkxp.s:550    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000040 $d
     /tmp/cc2MNkxp.s:557    .text.VL53L0X_get_offset_calibration_data_micro_meter:0000000000000000 $t
     /tmp/cc2MNkxp.s:564    .text.VL53L0X_get_offset_calibration_data_micro_meter:0000000000000000 VL53L0X_get_offset_calibration_data_micro_meter
     /tmp/cc2MNkxp.s:633    .text.VL53L0X_apply_offset_adjustment:0000000000000000 $t
     /tmp/cc2MNkxp.s:640    .text.VL53L0X_apply_offset_adjustment:0000000000000000 VL53L0X_apply_offset_adjustment
     /tmp/cc2MNkxp.s:718    .text.get_next_good_spad:0000000000000000 $t
     /tmp/cc2MNkxp.s:725    .text.get_next_good_spad:0000000000000000 get_next_good_spad
     /tmp/cc2MNkxp.s:825    .text.is_aperture:0000000000000000 $t
     /tmp/cc2MNkxp.s:832    .text.is_aperture:0000000000000000 is_aperture
     /tmp/cc2MNkxp.s:861    .text.is_aperture:0000000000000014 $d
     /tmp/cc2MNkxp.s:866    .text.enable_spad_bit:0000000000000000 $t
     /tmp/cc2MNkxp.s:873    .text.enable_spad_bit:0000000000000000 enable_spad_bit
     /tmp/cc2MNkxp.s:913    .text.count_enabled_spads:0000000000000000 $t
     /tmp/cc2MNkxp.s:920    .text.count_enabled_spads:0000000000000000 count_enabled_spads
     /tmp/cc2MNkxp.s:1061   .text.set_ref_spad_map:0000000000000000 $t
     /tmp/cc2MNkxp.s:1068   .text.set_ref_spad_map:0000000000000000 set_ref_spad_map
     /tmp/cc2MNkxp.s:1093   .text.get_ref_spad_map:0000000000000000 $t
     /tmp/cc2MNkxp.s:1100   .text.get_ref_spad_map:0000000000000000 get_ref_spad_map
     /tmp/cc2MNkxp.s:1125   .text.enable_ref_spads:0000000000000000 $t
     /tmp/cc2MNkxp.s:1132   .text.enable_ref_spads:0000000000000000 enable_ref_spads
     /tmp/cc2MNkxp.s:1281   .text.perform_ref_signal_measurement:0000000000000000 $t
     /tmp/cc2MNkxp.s:1288   .text.perform_ref_signal_measurement:0000000000000000 perform_ref_signal_measurement
     /tmp/cc2MNkxp.s:1404   .text.VL53L0X_set_reference_spads:0000000000000000 $t
     /tmp/cc2MNkxp.s:1411   .text.VL53L0X_set_reference_spads:0000000000000000 VL53L0X_set_reference_spads
     /tmp/cc2MNkxp.s:1579   .text.VL53L0X_get_reference_spads:0000000000000000 $t
     /tmp/cc2MNkxp.s:1586   .text.VL53L0X_get_reference_spads:0000000000000000 VL53L0X_get_reference_spads
     /tmp/cc2MNkxp.s:1677   .text.VL53L0X_perform_single_ref_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:1684   .text.VL53L0X_perform_single_ref_calibration:0000000000000000 VL53L0X_perform_single_ref_calibration
     /tmp/cc2MNkxp.s:1751   .text.VL53L0X_ref_calibration_io:0000000000000000 $t
     /tmp/cc2MNkxp.s:1758   .text.VL53L0X_ref_calibration_io:0000000000000000 VL53L0X_ref_calibration_io
     /tmp/cc2MNkxp.s:1931   .text.VL53L0X_perform_vhv_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:1938   .text.VL53L0X_perform_vhv_calibration:0000000000000000 VL53L0X_perform_vhv_calibration
     /tmp/cc2MNkxp.s:2062   .text.VL53L0X_perform_phase_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:2069   .text.VL53L0X_perform_phase_calibration:0000000000000000 VL53L0X_perform_phase_calibration
     /tmp/cc2MNkxp.s:2190   .text.VL53L0X_perform_ref_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:2197   .text.VL53L0X_perform_ref_calibration:0000000000000000 VL53L0X_perform_ref_calibration
     /tmp/cc2MNkxp.s:2270   .text.VL53L0X_perform_ref_spad_management:0000000000000000 $t
     /tmp/cc2MNkxp.s:2277   .text.VL53L0X_perform_ref_spad_management:0000000000000000 VL53L0X_perform_ref_spad_management
     /tmp/cc2MNkxp.s:2813   .text.VL53L0X_set_ref_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:2820   .text.VL53L0X_set_ref_calibration:0000000000000000 VL53L0X_set_ref_calibration
     /tmp/cc2MNkxp.s:2860   .text.VL53L0X_get_ref_calibration:0000000000000000 $t
     /tmp/cc2MNkxp.s:2867   .text.VL53L0X_get_ref_calibration:0000000000000000 VL53L0X_get_ref_calibration
     /tmp/cc2MNkxp.s:2911   .data.refArrayQuadrants:0000000000000000 refArrayQuadrants
     /tmp/cc2MNkxp.s:2907   .data.refArrayQuadrants:0000000000000000 $d

UNDEFINED SYMBOLS
VL53L0X_SetXTalkCompensationEnable
VL53L0X_SetLimitCheckEnable
VL53L0X_PerformSingleRangingMeasurement
ARM GAS  /tmp/cc2MNkxp.s 			page 80


VL53L0X_SetXTalkCompensationRateMegaCps
VL53L0X_SetOffsetCalibrationDataMicroMeter
VL53L0X_GetSequenceStepEnable
VL53L0X_SetSequenceStepEnable
VL53L0X_WrWord
VL53L0X_RdWord
VL53L0X_get_info_from_device
VL53L0X_GetOffsetCalibrationDataMicroMeter
VL53L0X_WriteMulti
VL53L0X_ReadMulti
VL53L0X_WrByte
VL53L0X_measurement_poll_for_completion
VL53L0X_ClearInterruptMask
VL53L0X_RdByte
VL53L0X_UpdateByte
